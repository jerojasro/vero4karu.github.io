<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Cansada de ser feliz]]></title>
  <link href="http://blog.vero4ka.info/atom.xml" rel="self"/>
  <link href="http://blog.vero4ka.info/"/>
  <updated>2017-01-07T11:31:30-05:00</updated>
  <id>http://blog.vero4ka.info/</id>
  <author>
    <name><![CDATA[vero4ka]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[El programa escolar de literatura en Rusia]]></title>
    <link href="http://blog.vero4ka.info/blog/2017/01/04/el-programa-escolar-de-literatura-en-rusia/"/>
    <updated>2017-01-04T18:50:49-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2017/01/04/el-programa-escolar-de-literatura-en-rusia</id>
    <content type="html"><![CDATA[<p>Según los estándares del ministerio de educación los estudiantes de colegio
rusos deben leer&hellip;</p>

<h2>Literatura rusa</h2>

<h3>Folklore</h3>

<ul>
<li>Folklore ruso. Cuentos de hadas y poémas épicos

<ul>
<li><a href="https://es.wikipedia.org/wiki/Ilya_Muromets">Ilya Muromets</a> y caballeros</li>
<li>Sadkó («Садко»)</li>
<li>Ilya Muromets y Nightingale el ladrón («Илья Муромец и Соловей разбойник»)</li>
</ul>
</li>
<li>Mito de los pueblos eslavos (Мифы древних славян)</li>
</ul>


<h3>Literatura rusa antigua de los siglos XI - XVII</h3>

<ul>
<li><a href="https://es.wikipedia.org/wiki/Cantar_de_las_huestes_de_%C3%8Dgor">Cantar de las huestes de Ígor</a> («Слово о полку Игореве»)</li>
<li><a href="https://es.wikipedia.org/wiki/Cr%C3%B3nica_de_N%C3%A9stor">Crónica de Néstor</a> («Повесть временных лет»)</li>
</ul>


<!-- more -->


<h3>Literatura rusa del siglo XVIII</h3>

<ul>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Mija%C3%ADl_Lomon%C3%B3sov">Mijaíl Lomonósov</a> (М. В. Ломоносов)

<ul>
<li>«Ода на день восшествия на престол Елисаветы Петровны»</li>
<li>«Вечернее размышление о Божием величестве при случае великого северного сияния»</li>
<li>«Разговор с Анакреонтом»</li>
<li>«Случились вместе два астронома в пиру»</li>
<li>«К статуе Петра Великого»</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Gavrila_Derzhavin">Gavrila Derzhavin</a> (Г. Р. Державин)

<ul>
<li>«Властителям и судиям»</li>
<li>«Снигирь»</li>
<li>«Признание»</li>
<li>«На птичку»</li>
<li><a href="http://max.mmlc.northwestern.edu/mdenner/Demo/texts/monument_derzhav.htm">&ldquo;Monument&rdquo;</a> «Памятник»</li>
<li>«Река времён в своём стремленьи»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Den%C3%ADs_Fonvizin">Denís Fonvizin</a> (Д. И. Фонвизин)

<ul>
<li>&ldquo;The Minor&rdquo; (Комедия «Недоросль»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Rad%C3%ADshchev">Aleksandr Radíshchev</a> (А. Н. Радищев)

<ul>
<li>&ldquo;Viaje de San Petersburgo a Moscú&rdquo; («Путешествие из Петербурга в Москву»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Nikol%C3%A1i_Karamz%C3%ADn">Nikolái Karamzín</a>

<ul>
<li>&ldquo;La pobre Lisa&rdquo; (Повесть «Бедная Лиза»)</li>
<li>&ldquo;Otoño&rdquo; («Осень»)</li>
</ul>
</li>
</ul>


<h3>Literatura rusa del siglo XIX</h3>

<p><img class="right" src="http://blog.vero4ka.info/images/pushkin.jpg" width="150" title="'Aleksandr Pushkin'" ></p>

<ul>
<li>Fábulas de <a href="https://es.wikipedia.org/wiki/Iv%C3%A1n_Krylov">Iván Krylov</a></li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Vasili_Zhukovski">Vasili Zhukovski</a>

<ul>
<li>&ldquo;Svetlana&rdquo; (Баллада «Светлана»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Griboy%C3%A9dov">Aleksandr Griboyédov</a> (А. С. Грибоедов)

<ul>
<li><a href="https://en.wikipedia.org/wiki/Woe_from_Wit">&ldquo;Woe from Wit&rdquo;</a> (Комедия «Горе от ума»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Kondrati_Ryl%C3%A9yev">Kondrati Ryléyev</a> (К. Ф. Рылеев)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Konstant%C3%ADn_B%C3%A1tiushkov">Konstantín Bátiushkov</a> (К. Н. Батюшков)</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Pushkin">Aleksandr Pushkin</a> (А. С. Пушкин)

<ul>
<li>Poesía</li>
<li>&ldquo;Los relatos de Belkin&rdquo; («Повести Белкина»)</li>
<li>&ldquo;Dubrovski&rdquo; («Дубровский»)</li>
<li><a href="https://goo.gl/UvGqrX">&ldquo;La hija del capitán&rdquo;</a> («Капитанская дочка»)</li>
<li><a href="https://es.wikipedia.org/wiki/Rusl%C3%A1n_y_Liudmila">&ldquo;Ruslán y Liudmila&rdquo;</a> («Руслан и Людмила»)</li>
<li>&ldquo;Poltava&rdquo; («Полтава»)</li>
<li>&ldquo;El caballero de bronce&rdquo; («Медный всадник»)</li>
<li><a href="https://es.wikipedia.org/wiki/Eugenio_Oneguin">&ldquo;Eugenio Oneguin&rdquo;</a> («Евгений Онегин»)</li>
<li><a href="https://es.wikipedia.org/wiki/Bor%C3%ADs_Godunov">&ldquo;Borís Godunov&rdquo;</a> («Борис Годуновc)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Mija%C3%ADl_L%C3%A9rmontov">Mijaíl Lérmontov</a> (М. Ю. Лермонтов)

<ul>
<li>Poesía</li>
<li><a href="https://es.wikipedia.org/wiki/Un_h%C3%A9roe_de_nuestro_tiempo">Un héroe de nuestro tiempo</a> («Герой нашего времени»)</li>
<li>&ldquo;El novicio&rdquo; («Мцыри»)</li>
<li>&ldquo;El canto del zar Iván Vasílievich, del joven opríchnik y del gallardo mercader Kaláshnikov&rdquo; («Песня про купца Калашникова»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Nikol%C3%A1i_G%C3%B3gol">Nikolái Gógol</a> (Н. В. Гоголь)

<ul>
<li><a href="https://es.wikipedia.org/wiki/Veladas_en_un_caser%C3%ADo_de_Dikanka">&ldquo;Veladas en un caserío de Dikanka&rdquo;</a> («Вечера на хуторе близ Диканьки»)</li>
<li><a href="https://es.wikipedia.org/wiki/Tar%C3%A1s_Bulba">&ldquo;Tarás Bulba&rdquo;</a> (Повесть «Тарас Бульба»)</li>
<li><a href="https://es.wikipedia.org/wiki/El_capote">&ldquo;El capote&rdquo;</a> (Повесть «Шинель»)</li>
<li><a href="https://goo.gl/koI7YD">&ldquo;El inspector&rdquo;</a> (Комедия «Ревизор»)</li>
<li><a href="https://es.wikipedia.org/wiki/Almas_muertas">&ldquo;Almas muertas&rdquo;</a> (Поэма «Мёртвые души»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Ostrovski">Aleksandr Ostrovski</a> (А. Н. Островский)

<ul>
<li>&ldquo;La pobreza no es afrenta&rdquo; («Бедность не порок»)</li>
<li>&ldquo;La novia sin dote &rdquo; («Бесприданница»)</li>
<li>&ldquo;La Tormenta&rdquo; («Гроза»)</li>
<li>&ldquo;El dineral&rdquo; («Доходное место»)</li>
<li>&ldquo;La niña de las nieves&rdquo; («Снегурочка»)</li>
<li>&ldquo;Entre propios anda el juego&rdquo; («Свои люди — сочтёмся»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Iv%C3%A1n_Turgu%C3%A9nev">Iván Turguénev</a> (И. С. Тургенев)

<ul>
<li>&ldquo;Padres e hijos&rdquo; («Отцы и дети»)</li>
<li>&ldquo;Rudin&rdquo; («Рудин»)</li>
<li>&ldquo;Memorias de un cazador&rdquo; («Записки охотника»)</li>
<li>&ldquo;Mumu&rdquo; («Муму»)</li>
<li>&ldquo;Ásya&rdquo; («Ася»)</li>
<li>&ldquo;Primer amor&rdquo; («Первая любовь»)</li>
</ul>
</li>
<li>Poesía de <a href="https://en.wikipedia.org/wiki/Fyodor_Tyutchev">Fyodor Tyutchev</a> (Ф. И. Тютчев)</li>
<li>Poesía de <a href="" title="https://en.wikipedia.org/wiki/Afanasy_Fet">Afanasy Fet</a> (А. А. Фет)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Apol%C3%B3n_M%C3%A1ikov">Apolón Máikov</a> (А. Н. Майков)</li>
<li><a href="https://en.wikipedia.org/wiki/Leo_Tolstoy">Leo Tolstoy</a> (Л. Н. Толстой)

<ul>
<li>&ldquo;Infancia&rdquo; («Детство»)</li>
<li>&ldquo;Adolescencia&rdquo; («Отрочество»)</li>
<li>&ldquo;Juventud&rdquo; («Юность»)</li>
<li>&ldquo;El prisionero del Cáucaso&rdquo; («Кавказский пленник»)</li>
<li>&ldquo;Después del baile&rdquo; («После бала»)</li>
<li><a href="https://es.wikipedia.org/wiki/Guerra_y_Paz">Guerra y paz</a> («Война и мир»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Nikol%C3%A1i_Nekr%C3%A1sov">Nikolái Nekrásov</a> (Н. А. Некрасов)

<ul>
<li>&ldquo;¿Quién es feliz en Rusia?&rdquo; («Кому на Руси жить хорошо»)</li>
<li>Poesía</li>
</ul>
</li>
<li>Poesía de Nikolay Yazykov (Н. М. Языков)</li>
<li>Nikolái_Leskov

<ul>
<li>&ldquo;Lady Macbeth de Mtsensk&rdquo; («Леди Макбет Мценского уезда»)</li>
<li>&ldquo;Relato sobre el zurdo bizco de Tula y la pulga de acero&rdquo; («Левша»)</li>
<li>&ldquo;El peregrino encantado&rdquo; («Очарованный странник»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Nikol%C3%A1i_Chernyshevski">Nikolái Chernyshevski</a>

<ul>
<li>&ldquo;¿Qué hacer?&rdquo; («Что делать?»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Iv%C3%A1n_Goncharov">Iván Goncharov</a> (И. А. Гончаров)

<ul>
<li>&ldquo;Una historia corriente&rdquo; («Обыкновенная история»)</li>
<li><a href="https://es.wikipedia.org/wiki/Obl%C3%B3mov">&ldquo;Oblómov&rdquo;</a> («Обломов»)</li>
<li>«Обрыв»</li>
<li>&ldquo;Un millón de dudas&rdquo; («Мильон терзаний»)</li>
</ul>
</li>
<li>Poesía de <a href="https://en.wikipedia.org/wiki/Ivan_Savvich_Nikitin">Ivan Savvich Nikitin</a> (И. С. Никитин)</li>
<li><a href="https://es.wikipedia.org/wiki/Aleks%C3%A9i_Nikol%C3%A1yevich_Tolst%C3%B3i">Alekséi Nikoláyevich Tolstói</a> (А. Н. Толстой)

<ul>
<li>&ldquo;Pedro I&rdquo; («Пётр I»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Aleks%C3%A9i_Konstant%C3%ADnovich_Tolst%C3%B3i">Alekséi Konstantínovich Tolstói</a> (А. К. Толстой)</li>
<li><a href="https://es.wikipedia.org/wiki/Mija%C3%ADl_Saltykov-Shchedr%C3%ADn">Mijaíl Saltykov-Shchedrín</a> (М. Е. Салтыков-Щедрин)

<ul>
<li>&ldquo;Historia de una ciudad&rdquo; («История одного города»)</li>
<li>«Вяленая вобла»)</li>
<li>«Повесть о том, как один мужик двух генералов прокормил»</li>
<li>«Дикий помещик»</li>
<li>«Медведь на воеводстве»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Vlad%C3%ADmir_Korolenko">Vladímir Korolenko</a> (В. Г. Короленко)

<ul>
<li>«Чудная»</li>
<li>&ldquo;Sin lengua&rdquo; («Без языка»)</li>
<li>«Река играет»</li>
<li>«Парадокс»</li>
<li>«Огоньки»</li>
<li>«В дурном обществе»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Ant%C3%B3n_Ch%C3%A9jov">Antón Chéjov</a> (А. П. Чехов)

<ul>
<li>&ldquo;Tío Vania&rdquo; («Дядя Ваня»)</li>
<li><a href="https://es.wikipedia.org/wiki/El_jard%C3%ADn_de_los_cerezos">&ldquo;El jardín de los cerezos&rdquo;</a> («Вишнёвый сад»)</li>
<li>&ldquo;El apellido caballuno&rdquo; («Лошадиная фамилия»)</li>
<li>«Хамелеон»</li>
<li>&ldquo;El gordo y el flaco&rdquo; («Толстый и тонкий»)</li>
<li>&ldquo;A Malefactor&rdquo; («Злоумышленник»)</li>
<li>&ldquo;The Death of a Government Clerk&rdquo; («Смерть чиновника»)</li>
<li>«Хирургия»</li>
<li>&ldquo;The Huntsman&rdquo; («Егерь»)</li>
<li>&ldquo;Misery&rdquo; («Тоска»)</li>
<li>«В аптеке»</li>
<li>&ldquo;An Artist&rsquo;s Story [The House with the Mezzanine]&rdquo; («Дом с мезонином»)</li>
<li>&ldquo;Anna on the Neck&rdquo; («Анна на шее»)</li>
<li>&ldquo;El oso&rdquo; («Медведь»)</li>
</ul>
</li>
</ul>


<h3>Literatura rusa del siglo XX (la primera mitad)</h3>

<ul>
<li><a href="https://es.wikipedia.org/wiki/Iv%C3%A1n_Bunin">Iván Bunin</a> (И. А. Бунин)

<ul>
<li><a href="https://en.wikipedia.org/wiki/The_Gentleman_from_San_Francisco">&ldquo;The Gentleman from San Francisco&rdquo;</a> («Господин из Сан-Франциско»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Konstant%C3%ADn_Balmont">Konstantín Balmont</a> (К. Д. Бальмонт)</li>
<li>Poesía de Innokienti Ánnienski</li>
<li>Poesía de Nikolái Gumiliov</li>
<li>Konstantín Paustovski

<ul>
<li>&ldquo;Warm Bread&rdquo; («Тёплый хлеб»)</li>
<li>&ldquo;Telegram&rdquo; («Телеграмма»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Futurismo_ruso">Ígor Severyanin</a> (И. Северянин)</li>
<li>Alekséi Rémizov (А. М. Ремизов)

<ul>
<li>«Змей»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Yevgueni_Zamiatin">Yevgueni Zamiatin</a> (Е. И. Замятин)

<ul>
<li><a href="" title="https://es.wikipedia.org/wiki/Nosotros_(novela)">&ldquo;Nosotros&rdquo;</a> («Мы»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Kupr%C3%ADn">Aleksandr Kuprín</a> (А. И. Куприн)

<ul>
<li>&ldquo;Móloj&rdquo; («Молох»)</li>
<li>&ldquo;Olesia&rdquo; («Олеся»)</li>
<li>&ldquo;El brazalete de rubíes&rdquo; («Гранатовый браслет»)</li>
<li>&ldquo;El desafio&rdquo; («Поединок»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/M%C3%A1ximo_Gorki">Máximo Gorki</a> (М. Горький)

<ul>
<li>&ldquo;La madre&rdquo; («Мать»)</li>
<li>&ldquo;Los bajos fondos&rdquo; («На дне»)</li>
<li>&ldquo;La vieja Izerguíl&rdquo; («Старуха Изергиль»)</li>
<li>&ldquo;Makar Chudrá&rdquo; («Макар Чудра»)</li>
<li>&ldquo;Chelkash&rdquo; («Челкаш»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Aleksandr_Blok">Aleksandr Blok</a> (А. А. Блок)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Vlad%C3%ADmir_Mayakovski">Vladímir Mayakovski</a> (В. В. Маяковский)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Sergu%C3%A9i_Yesenin">Serguéi Yesenin</a> (А. А. Блок)</li>
<li>Mijaíl Prishvin (Михаил Пришвин)

<ul>
<li>«Кладовая солнца»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Leonid_Andr%C3%A9iev">Leonid Andréiev</a> (Леонид Андреев)

<ul>
<li>&ldquo;Kusaka&rdquo; («Кусака»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Serafim%C3%B3vich">Aleksandr Serafimóvich</a> (А. Серафимович)

<ul>
<li>&ldquo;El torrente de hierro&rdquo; («Железный поток»)</li>
</ul>
</li>
<li>Vsévolod Ivánov (Вс. Иванов)

<ul>
<li>&ldquo;El tren blindado 14-69&rdquo; «Бронепоезд 14-69»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Isaak_B%C3%A1bel">Isaak Bábel</a> (Исаак Бабель)

<ul>
<li>&ldquo;Primer Ejército de Caballería&rdquo; («Конармия»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Aleksandr_Fad%C3%A9yev">Aleksandr Fadéyev</a> (Александр Фадеев)

<ul>
<li>&ldquo;La derrota&rdquo; («Разгром») - 1926</li>
</ul>
</li>
<li>Borís Pilniak (Б. Пильняк)

<ul>
<li>&ldquo;Ciudad desnuda&rdquo; («Голый год»)</li>
</ul>
</li>
<li>Boris Lavrenyov (Б. Лавренев)

<ul>
<li>&ldquo;Viento&rdquo; («Ветер»)</li>
</ul>
</li>
<li>Dmitry Furmanov (Дмитрий Фурманов)

<ul>
<li>&ldquo;Chapayev&rdquo; («Чапаев»)</li>
</ul>
</li>
<li>Vikenty Veresaev (Викентий Вересаев)

<ul>
<li>&ldquo;Without a Road&rdquo; («В тупике»)</li>
</ul>
</li>
<li>Ilf y Petrov (Илья Ильф и Евгений Петров)

<ul>
<li><a href="" title="https://es.wikipedia.org/wiki/Las_doce_sillas_(novela)">&ldquo;Las Doce Sillas&rdquo;</a> («Двенадцать стульев»)</li>
</ul>
</li>
<li>Teffi (Надежда Тэффи)

<ul>
<li>&ldquo;Nostalgia&rdquo; («Ностальгия»)</li>
</ul>
</li>
<li>Cuentos de Vitaly Bianki (Виталий Бианки)</li>
<li>Poesía de Nikolay Zabolotsky (Николай Заболоцкий)</li>
<li>Mikhail Zoshchenko (Михаил Зощенко)

<ul>
<li>«Великие путешественники»</li>
<li>&ldquo;The Galosh&rdquo; («Галоша»)</li>
<li>«Встреча»</li>
<li>«Монтёр»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Arkadi_Av%C3%A9rchenko">Arkadi Avérchenko</a> (Аркадий Аверченко)

<ul>
<li>&ldquo;Una docena de cuchillos en la parte posterior de la Revolución&rdquo; («Дюжина ножей в спину революции»)</li>
<li>«Смерть африканского охотника»</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Anna_Ajm%C3%A1tova">Anna Ajmátova</a> (Анна Ахматова)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Marina_Tsvet%C3%A1yeva">Marina Tsvetáyeva</a> (М. И. Цветаева)</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/%C3%93sip_Mandelshtam">Ósip Mandelshtam</a> (О. Э. Мандельштам)</li>
<li><a href="https://es.wikipedia.org/wiki/Andr%C3%A9i_Plat%C3%B3nov">Andréi Platónov</a> (А. П. Платонов)

<ul>
<li><a href="https://es.wikipedia.org/wiki/Chevengur">&ldquo;Chevengur&rdquo;</a> «Чевенгур»</li>
<li>«Котлован»</li>
<li>«Волшебное кольцо»</li>
<li>«Неизвестный цветок»</li>
<li>«На заре туманной юности»</li>
<li>&ldquo;The Cow&rdquo; («Корова»)</li>
<li>«Юшка»</li>
<li>«Сокровенный человек»</li>
<li>«Шарманка»</li>
<li>«Впрок»</li>
</ul>
</li>
<li>Aleksandr Grin (А. С. Грин)

<ul>
<li>&ldquo;Velas rojas&rdquo; («Алые паруса»)</li>
<li>&ldquo;La lámpara verde&rdquo; («Зелёная лампа»)</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Mija%C3%ADl_Bulg%C3%A1kov">Mijaíl Bulgákov</a> (М. А. Булгаков)

<ul>
<li>«Кабала святош»</li>
<li>«Бег»</li>
<li><a href="https://es.wikipedia.org/wiki/La_Guardia_Blanca">&ldquo;La Guardia Blanca&rdquo;</a> «Белая гвардия»</li>
<li>&ldquo;Corazón de perro&rdquo; («Собачье сердце»)</li>
<li><a href="https://es.wikipedia.org/wiki/El_maestro_y_Margarita">&ldquo;El maestro y Margarita&rdquo;</a> «Мастер и Маргарита»</li>
<li>«Похождения Чичикова»</li>
</ul>
</li>
<li>Poesía de <a href="https://en.wikipedia.org/wiki/Aleksandr_Tvardovsky">Aleksándr Tvardovski</a> (А. Т. Твардовский)

<ul>
<li>&ldquo;Vasili Tyorkin&rdquo; («Василий Тёркин»)</li>
</ul>
</li>
<li>Yuri Tyniánov (Ю. Тынянов)

<ul>
<li>&ldquo;La muerte de Vazir-Mujtar&rdquo; («Смерть Вазир-Мухтара»)</li>
</ul>
</li>
<li>Poesía de Alexey Surkov (А. Сурков)</li>
<li><a href="https://es.wikipedia.org/wiki/Bor%C3%ADs_Pasternak">Borís Pasternak</a> (Б. Л. Пастернак)

<ul>
<li>Poesía</li>
<li><a href="https://es.wikipedia.org/wiki/Doctor_Zhivago">&ldquo;Doctor Zhivago&rdquo;</a> («Доктор Живаго»)</li>
</ul>
</li>
<li>Poesía de <a href="https://es.wikipedia.org/wiki/Nikol%C3%A1i_Semi%C3%B3novich_T%C3%ADjonov">Nikolái Semiónovich Tíjonov</a> (Н. Тихонов)</li>
<li>Poesía de Konstantín Símonov (К. М. Симонов)

<ul>
<li>«Ты помнишь, Алёша, дороги Смоленщины…»</li>
<li>«Жди меня»</li>
</ul>
</li>
<li><a href="https://es.wikipedia.org/wiki/Mija%C3%ADl_Sh%C3%B3lojov">Mijaíl Shólojov</a> (М. А. Шолохов)

<ul>
<li><a href="https://es.wikipedia.org/wiki/El_Don_apacible">&ldquo;El Don apacible&rdquo;</a> («Тихий Дон»)</li>
<li>&ldquo;Campos roturados&rdquo; («Поднятая целина»)</li>
<li>&ldquo;El destino de un hombre&rdquo; («Судьба человека»)</li>
</ul>
</li>
</ul>


<h3>Literatura rusa del siglo XX (la segunda mitad)</h3>

<h2>Literatura mundial</h2>

<p>to be continued &hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Think like I do]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/12/18/think-like-i-do/"/>
    <updated>2016-12-18T22:09:26-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/12/18/think-like-i-do</id>
    <content type="html"><![CDATA[<blockquote><p>A she-wolf teaches her cubs: "Bite like I do," and that's enough.<br/>A she-rabbit teaches her offspring: "Run like I do," and that's also enough.<br/>But when a man teaches his children: "Think like I do," and that's a crime.</p><footer><strong>Strugatsky Brothers</strong></footer></blockquote>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Libros que leen los niños rusos]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/12/18/libros-que-leen-los-ninos-rusos/"/>
    <updated>2016-12-18T11:49:57-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/12/18/libros-que-leen-los-ninos-rusos</id>
    <content type="html"><![CDATA[<p><img class="right" src="http://blog.vero4ka.info/images/Cipollino.jpg" width="150" title="'Cipollino'" ></p>

<h2>Gianni Rodari, Cipollino</h2>

<p>Aventuras de Cipollino es un cuento del escritor italiano Gianni Rodari
en el que el personaje principal, un niño-cebolla llamado Cipollino, lucha
contra la injusticia, defendiendo a los ciudadanos del los ricos de la ciudad,
del señor Tomate y el príncipe Limón (el gobernador del país).
Todos los personajes del cuento son frutas y verduras.</p>

<!-- more -->


<h2>Nikolay Nósov, Aventuras de Nosabenada y sus Amigos</h2>

<p>Aventuras de un niño travieso, curioso, siempre activo y permanentemente
enredado en situaciones poco habituales y con frecuencia cómicas.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/la_isla_del_tesoro.jpg" width="150" title="'La isla del tesoro'" ></p>

<h2>Mark Twain, Las aventuras de Tom Sawyer</h2>

<p>Relata las aventuras de la infancia de Tom Sawyer, un niño que crece durante
el antebellum del Sur de los Estados Unidos en “St. Petersburg”.</p>

<h2>Robert Louis Stevenson, La isla del tesoro</h2>

<p>Una novela del escritor escocés Robert Stevenson, en la que el autor describe
las aventuras relacionadas con la búsqueda de los tesoros escondidos por el
pirata Capitán J. Flint en una isla desierta.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/el_caballito_jorobadito.jpg" width="150" title="'El caballito jorobado'" ></p>

<h2>Piotr Yershóv,  El caballito jorobado</h2>

<p>Un cuento en verso, escrito en la década de 1830. Los personajes principales
son el hijo de un campesino, llamado Iván el Loco, y un caballito mágico jorobado.</p>

<h2>Los cuentos de los Hermanos Grimm</h2>

<p>Son cuentos folclóricos recopilados por dos escritores alemanes: Los músicos
de Bremen, El lobo y las siete cabritillas, El pescador y su esposa.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/pulgarcita.jpg" width="150" title="'Pulgarcita'" ></p>

<h2>Los libros del escritor danés Hans Christian Andersen</h2>

<p>El traje nuevo del emperador (El rey desnudo), Pulgarcita, La Sirenita,
El patito feo, La reina de las nieves, El yesquero.</p>

<h2>Serguéi Aksákov, La Flor escarlata</h2>

<p>La trama recuerda a la de La Bella y la Bestia, pero se desarrolla en un ambiente ruso.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/momo.jpg" width="150" title="'Momo'" ></p>

<h2>Los cuentos de Charles Perrault</h2>

<p>Barba Azul – un cuento popular francés, la leyenda acerca de un marido pérfido,
recopilado y adaptado por Charles Perrault.
Pulgarcito, Caperucita Roja, La bella durmiente, El gato con botas y muchos otros.</p>

<h2>Michael Ende, Momo</h2>

<p>Del libro del autor alemán Michael Ende, aprendemos la historia de una
chica increíble llamada Momo. Ella tenía un talento muy raro – saber escuchar
a los demás, y por lo tanto tenía muchos amigos. Pero una vez en la ciudad,
donde vivía Momo, aparecieron los caballeros grises – los ladrones de tiempo …</p>

<p><img class="right" src="http://blog.vero4ka.info/images/Matilda.jpg" width="150" title="'Matilda'" ></p>

<h2>Roald Dahl, Matilda</h2>

<p><em>(Es muy recomendado buscar una edición con ilustraciones de Quentin Blake)</em></p>

<p>Matilda es una niña brillante, pero sus padres la consideran estúpida, que
sólo les da un dolor de cabeza adicional. La verdad reside en el hecho de
que sus padres son tontos, y sólo piensan en sí mismos y no se preocupan por
su propia hija. Entonces Matilda decide volver a educar a sus padres negligentes,
junto con la viciosa directora de su colegio.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/karlson.jpg" width="150" title="'Karlsson-on-the-Roof'" ></p>

<h2>Libros de Astrid Lindgren</h2>

<p>Astrid Lindgren es una escritora sueca, que provocó un intenso debate acerca
de la idea de que la educación tenga en cuenta la psicología del niño.
Astrid Lindgren siguió la polémica que se desarrolló en la sociedad y
participó en ella, apoyando a la educación que tenga en cuenta los pensamientos
y sentimientos de los niños y así muestra respeto a ellos.</p>

<p>Sus libros: Karlsson-on-the-Roof, Pipi Calzaslargas, Ronja, la hija del
bandolero y muchos otros.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/Finn_Family.png" width="150" title="'Finn Family'" ></p>

<h2>Tove Jansson, Mumintroll</h2>

<p>Escritora  finlandesa, autora de historias para niños protagonizadas por una
familia de trolls blancos, cubiertos de pelo y de apariencia redondeada,
y con grandes hocicos que les hacen asemejarse remotamente a hipopótamos.</p>

<h2>Cuentos para niños de Alexander Pushkin</h2>

<p>La princesa muerta y los siete fortachones, El pescador y el pececito dorado,
El príncipe Guidón y la bella princesa Cisne y El gallito de oro.</p>

<h2>Los cuentos de Ernest Thompson Seton</h2>

<p>Ernest Thompson Seton es el fundador del Movimiento “Woodcraft” que
influyó directamente en las concepciones pedagógicas de Lord Baden-Powell
al crear el Movimiento de los Boy Scouts.</p>

<p><img class="right" src="http://blog.vero4ka.info/images/pipi.jpg" width="150" title="'Pipi Calzaslargas'" ></p>

<h2>Alan Alexander Milne, Winnie de Pooh</h2>

<h2>Aleksey Nikolayevich Tolstoy, Adventures of Buratino or The Golden Key</h2>

<h2>Las mil y una noches</h2>

<h2>Lewis Carroll, Las aventuras de Alicia en el país de las maravillas</h2>

<h2>L. Frank Baum, El maravilloso mago de Oz</h2>

<p><img class="right" src="http://blog.vero4ka.info/images/bremen.jpg" width="150" title="'Los músicos de Bremen'" ></p>

<h2>Rudyard Kipling, El libro de la selva</h2>

<p>Los cuentos Mowgli, La caza de Kaa, Rikki-Tikki-Tavi y otros.</p>

<h2>Antón Chéjov, Kashtanka</h2>

<p>Kashtanka es un pequeño perro de color castaña, parecido a un zorro,
que una noche nevada se pierde en la calle, comenzando así su extraña
y maravillosa aventura…</p>

<h2>Eric Knight, Lassie</h2>

<p>Eric Knight fue un escritor inglés nacido en Menston en Yorkshire.
Fue principalmente conocido por crear el personaje de ficción “Lassie”.
Lassie es un perro Collie que vive con la familia de un minero de Yorkshire,
Sam Carraclough. Cuando Sam pierde su trabajo, se ve obligado a vender
el perro a un noble rico. Después de varios intentos exitosos de Lassie
de escapar, el nuevo propietario del Duque Radling decide llevarla lejos
de Yorkshire a su finca en Escocia. Pero Lassie se escapa de allí y vuelve
a la casa de Sam, sobreviviendo en el camino un montón de aventuras.</p>

<h2>Jack London, La llamada de lo salvaje</h2>

<p>Es una novela corta del escritor estadounidense Jack London.
El argumento trata de un perro llamado Buck, cuyos instintos primitivos
vuelven tras una serie de sucesos que le ocurren cuando lo ponen a tirar
de un trineo en el Yukón, durante la fiebre del oro que tuvo lugar en
el siglo XX en el Klondike, durante la cual los perros de tiro
se compraban a precios elevados.</p>

<p>Les agradecería mucho si me pudieran recomendar algunos libros
que les han impactado en su infancia.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sistema de riego por capilaridad]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/30/sistema-de-riego-por-capilaridad/"/>
    <updated>2016-10-30T17:55:06-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/30/sistema-de-riego-por-capilaridad</id>
    <content type="html"><![CDATA[<p><img class="right" src="http://blog.vero4ka.info/images/riego1.jpg" title="'Sistema de riego por capilaridad'" >
<img class="right" src="http://blog.vero4ka.info/images/riego2.jpg" title="'Sistema de riego por capilaridad'" ></p>

<ul>
<li>Bomba de agua</li>
<li>Temporizador</li>
<li>Cuentagotas (x4)</li>
<li>Manguera (2m)</li>
<li>Garrafón</li>
<li>Balde con agua</li>
<li>Silicona</li>
</ul>


<!-- more -->


<p><img class="right" src="http://blog.vero4ka.info/images/riego3.jpg" title="'Sistema de riego por capilaridad'" >
<img class="right" src="http://blog.vero4ka.info/images/riego4.jpg" title="'Sistema de riego por capilaridad'" ></p>

<p>La bomba pasa el agua desde el balde al garrafón por medio de una manguera.
El garrafón tiene unos huecos al fondo en las cuales están instalados los tubos
de las cuentagotas. Cuando el garrafón está instalado encima de las plantas
que necesitan el riego, el agua basa por la gravedad por medio de
las cuentagotas, con la velocidad definida por la rueda para regular
el flujo del gotero.</p>

<p><img class="left" src="http://blog.vero4ka.info/images/riego5.jpg" title="'Sistema de riego por capilaridad'" >
<img class="left" src="http://blog.vero4ka.info/images/riego6.jpg" title="'Sistema de riego por capilaridad'" >
<img class="left" src="http://blog.vero4ka.info/images/riego7.jpg" title="'Sistema de riego por capilaridad'" ></p>

<p><img class="right" src="http://blog.vero4ka.info/images/riego8.jpg" title="'Sistema de riego por capilaridad'" >
<img class="right" src="http://blog.vero4ka.info/images/riego9.jpg" title="'Sistema de riego por capilaridad'" >
<img class="right" src="http://blog.vero4ka.info/images/riego10.jpg" title="'Sistema de riego por capilaridad'" ></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to upload a file to Amazon S3 and generate a pre-signed URL]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/27/how-to-upload-a-file-to-amazon-s3-and-generate-a-pre-signed-url/"/>
    <updated>2016-10-27T09:32:43-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/27/how-to-upload-a-file-to-amazon-s3-and-generate-a-pre-signed-url</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">datetime</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">StringIO</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">xlwt</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">boto3.session</span> <span class="kn">import</span> <span class="n">Session</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">boto3</span> <span class="kn">import</span> <span class="n">client</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Create a file, for example, an Excel document.</span>
</span><span class='line'><span class="n">xls</span> <span class="o">=</span> <span class="n">xlwt</span><span class="o">.</span><span class="n">Workbook</span><span class="p">()</span>
</span><span class='line'><span class="n">ws</span> <span class="o">=</span> <span class="n">xls</span><span class="o">.</span><span class="n">add_sheet</span><span class="p">(</span><span class="s">&#39;A Test Sheet&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ws</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1234.56</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">file_name</span> <span class="o">=</span> <span class="s">&#39;example.xls&#39;</span>
</span><span class='line'><span class="n">output</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
</span><span class='line'><span class="n">xls</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Save the file to S3</span>
</span><span class='line'><span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span>
</span><span class='line'>    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="p">],</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="n">s3</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s">&#39;s3&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">s3_bucket_name</span> <span class="o">=</span> <span class="s">&#39;YourBucket&#39;</span>
</span><span class='line'><span class="n">s3_file_key</span> <span class="o">=</span> <span class="s">&#39;dir1/dir2/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">result</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="n">s3_bucket_name</span><span class="p">)</span><span class="o">.</span><span class="n">put_object</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Key</span><span class="o">=</span><span class="n">s3_file_key</span><span class="p">,</span>
</span><span class='line'>    <span class="n">Body</span><span class="o">=</span><span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Generate a pre-signed URL</span>
</span><span class='line'><span class="n">s3_client</span> <span class="o">=</span> <span class="n">client</span><span class="p">(</span>
</span><span class='line'>    <span class="s">&#39;s3&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">region_name</span><span class="o">=</span><span class="s">&#39;us-east-1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="p">],</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">url</span> <span class="o">=</span> <span class="n">s3_client</span><span class="o">.</span><span class="n">generate_presigned_url</span><span class="p">(</span>
</span><span class='line'>    <span class="n">ClientMethod</span><span class="o">=</span><span class="s">&#39;get_object&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">Params</span><span class="o">=</span><span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;Bucket&#39;</span><span class="p">:</span> <span class="n">s3_bucket_name</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;Key&#39;</span><span class="p">:</span> <span class="n">s3_file_key</span><span class="p">,</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="n">ExpiresIn</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">,</span>  <span class="c"># Default: 3600</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'><span class="c"># https://s3.amazonaws.com/YourBucket/dir1/dir2/example.xls?AWSAccessKeyId=ATPAJNUDN3ENT2I4S6EF&amp;Expires=1477582080&amp;Signature=POvreXScdYNES98SPFeAN3y12DL%3D</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to send an email with attachment via Amazon SES in Python]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/26/how-to-send-an-email-with-attachment-via-amazon-ses-in-python/"/>
    <updated>2016-10-26T14:19:26-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/26/how-to-send-an-email-with-attachment-via-amazon-ses-in-python</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">xlwt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">boto3</span> <span class="kn">import</span> <span class="n">client</span>
</span><span class='line'>
</span><span class='line'><span class="n">email_from</span> <span class="o">=</span> <span class="s">&#39;from@example.com&#39;</span>
</span><span class='line'><span class="n">email_to</span> <span class="o">=</span> <span class="s">&#39;to@example.com&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Create a workbook</span>
</span><span class='line'><span class="n">xls</span> <span class="o">=</span> <span class="n">xlwt</span><span class="o">.</span><span class="n">Workbook</span><span class="p">()</span>
</span><span class='line'><span class="c"># Create a sheet</span>
</span><span class='line'><span class="n">sheet</span> <span class="o">=</span> <span class="n">xls</span><span class="o">.</span><span class="n">add_sheet</span><span class="p">(</span><span class="s">&#39;Sheet name&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c"># Set styles for headers and dates</span>
</span><span class='line'><span class="n">header_style</span> <span class="o">=</span> <span class="n">xlwt</span><span class="o">.</span><span class="n">easyxf</span><span class="p">(</span><span class="s">&#39;font: bold True;&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">date_format</span> <span class="o">=</span> <span class="n">xlwt</span><span class="o">.</span><span class="n">XFStyle</span><span class="p">()</span>
</span><span class='line'><span class="n">date_format</span><span class="o">.</span><span class="n">num_format_str</span> <span class="o">=</span> <span class="s">&#39;dd/mm/yyyy hh:mm:ss&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Header</span>
</span><span class='line'><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s">u&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">u&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'><span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">labels</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Get data for other rows</span>
</span><span class='line'><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">get_rows_with_content</span><span class="p">():</span>
</span><span class='line'>    <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Write it down</span>
</span><span class='line'><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)):</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="n">row</span><span class="p">])):</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>
</span><span class='line'>        <span class="c"># If it&#39;s a header</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">header_style</span><span class="p">)</span>
</span><span class='line'>            <span class="k">continue</span>
</span><span class='line'>        <span class="c"># If it&#39;s a date</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
</span><span class='line'>            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">date_format</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Set filename</span>
</span><span class='line'><span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
</span><span class='line'><span class="n">file_name</span> <span class="o">=</span> <span class="s">&#39;my_file_{}.xls&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y-%m-</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Save the file</span>
</span><span class='line'><span class="n">output</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
</span><span class='line'><span class="n">xls</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Build an email</span>
</span><span class='line'><span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">()</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Hi, here is your file&#39;</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_from</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_to</span>
</span><span class='line'><span class="c"># What a recipient sees if they don&#39;t use an email reader</span>
</span><span class='line'><span class="n">msg</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="s">&#39;Multipart message.</span><span class="se">\n</span><span class="s">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># The attachment</span>
</span><span class='line'><span class="n">part</span> <span class="o">=</span> <span class="n">MIMEApplication</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</span><span class='line'><span class="n">part</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Content-Disposition&#39;</span><span class="p">,</span> <span class="s">&#39;attachment&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">file_name</span><span class="p">)</span>
</span><span class='line'><span class="n">part</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s">&#39;application/vnd.ms-excel; charset=UTF-8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Connect to Amazon SES</span>
</span><span class='line'><span class="n">ses</span> <span class="o">=</span> <span class="n">client</span><span class="p">(</span>
</span><span class='line'>    <span class="s">&#39;ses&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">region_name</span><span class="o">=</span><span class="s">&#39;us-east-1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="p">],</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="c"># And finally, send the email</span>
</span><span class='line'><span class="n">ses</span><span class="o">.</span><span class="n">send_raw_email</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Source</span><span class="o">=</span><span class="n">email_from</span><span class="p">,</span>
</span><span class='line'>    <span class="n">Destinations</span><span class="o">=</span><span class="p">[</span><span class="n">email_to</span><span class="p">],</span>
</span><span class='line'>    <span class="n">RawMessage</span><span class="o">=</span><span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;Data&#39;</span><span class="p">:</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">(),</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>If we need to create a ZIP archive first:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">zipfile</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">tempfile</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">encoders</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">email.mime.multipart</span> <span class="kn">import</span> <span class="n">MIMEMultipart</span><span class="p">,</span> <span class="n">MIMEBase</span>
</span><span class='line'>
</span><span class='line'><span class="c"># ....</span>
</span><span class='line'><span class="n">output</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
</span><span class='line'><span class="n">xls</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Create zip file</span>
</span><span class='line'><span class="n">zf</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryFile</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;fileprefix&#39;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s">&#39;.zip&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nb">zip</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zf</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nb">zip</span><span class="o">.</span><span class="n">writestr</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</span><span class='line'><span class="nb">zip</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'><span class="n">zf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEMultipart</span><span class="p">()</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Hi, here is your file&#39;</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_from</span>
</span><span class='line'><span class="n">msg</span><span class="p">[</span><span class="s">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_to</span>
</span><span class='line'>
</span><span class='line'><span class="c"># What a recipient sees if they don&#39;t use an email reader</span>
</span><span class='line'><span class="n">msg</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="s">&#39;Multipart message.</span><span class="se">\n</span><span class="s">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># the attachment</span>
</span><span class='line'><span class="n">part</span> <span class="o">=</span> <span class="n">MIMEBase</span><span class="p">(</span><span class="s">&#39;application&#39;</span><span class="p">,</span> <span class="s">&#39;zip&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">part</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span><span class="n">zf</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span class='line'><span class="n">encoders</span><span class="o">.</span><span class="n">encode_base64</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
</span><span class='line'><span class="n">part</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span>
</span><span class='line'>    <span class="s">&#39;Content-Disposition&#39;</span><span class="p">,</span> <span class="s">&#39;attachment&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">filename</span><span class="o">=</span><span class="s">u&#39;{}.zip&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_name</span><span class="p">),</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="n">msg</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
</span><span class='line'><span class="c"># ....</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cómo pasar variable desde una vista a formulario en Django]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/21/como-pasar-variable-desde-una-vista-a-formulario-en-django/"/>
    <updated>2016-10-21T14:07:56-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/21/como-pasar-variable-desde-una-vista-a-formulario-en-django</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span>views.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
</span><span class='line'>    <span class="n">model</span> <span class="o">=</span> <span class="n">MyModel</span>
</span><span class='line'>    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;myapp/my_form.html&#39;</span>
</span><span class='line'>    <span class="n">form_class</span> <span class="o">=</span> <span class="n">MyForm</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_form_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyCreateView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_form_kwargs</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># La variable que queremos pasar al formulario</span>
</span><span class='line'>        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;current_user&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">})</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">kwargs</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>forms.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># Recibir la variable y borrarla del listado de argumentos.</span>
</span><span class='line'>        <span class="n">current_user</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;current_user&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="nb">super</span><span class="p">(</span><span class="n">MyForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Albóndigas de lentejas]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/17/albondigas-de-lentejas/"/>
    <updated>2016-10-17T07:38:52-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/17/albondigas-de-lentejas</id>
    <content type="html"><![CDATA[<p><img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas1.jpg"></p>

<!-- more -->


<p>Cocinar lentejas con cebolla y sal</p>

<p><img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas2.jpg" width="300"></p>

<p>Licuar todo en una licuadora</p>

<p><img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas3.jpg" width="300">
<img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas4.jpg" width="300"></p>

<p>Mezclar con huevos y migas de pan</p>

<p><img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas5.jpg" width="300"></p>

<p>Fritar con aceite</p>

<p><img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas6.jpg" width="300">
<img class="center" src="http://blog.vero4ka.info/images/lentejas/lentejas7.jpg" width="300"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mierdero de las semanas]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/10/07/mierdero-de-las-semanas/"/>
    <updated>2016-10-07T11:53:05-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/10/07/mierdero-de-las-semanas</id>
    <content type="html"><![CDATA[<p>Bienvenidos al mierdero de las semanas:</p>

<table>
<thead>
<tr>
<th>Lenguaje                       </th>
<th>Sun  </th>
<th> Mon </th>
<th> Tue </th>
<th> Wed </th>
<th> Thu </th>
<th> Fri </th>
<th> Sat</th>
</tr>
</thead>
<tbody>
<tr>
<td>postgresql: <code>EXTRACT(DOW...)</code>  </td>
<td>  0  </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6</td>
</tr>
<tr>
<td>ruby: <code>time.wday</code>              </td>
<td>  0  </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6</td>
</tr>
<tr>
<td>Python: <code>isoweekday()</code>         </td>
<td>  7  </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6</td>
</tr>
<tr>
<td>Python: <code>weekday()</code>            </td>
<td>  6  </td>
<td>  0  </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5</td>
</tr>
<tr>
<td>mysql: <code>DAYOFWEEK(...)</code>        </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6  </td>
<td>  7</td>
</tr>
<tr>
<td>Java: <code>DayOfWeek(...)</code>         </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6  </td>
<td>  7</td>
</tr>
<tr>
<td>Erlang: <code>day_of_the_week(...)</code> </td>
<td>  1  </td>
<td>  2  </td>
<td>  3  </td>
<td>  4  </td>
<td>  5  </td>
<td>  6  </td>
<td>  7</td>
</tr>
</tbody>
</table>


<p>Enlaces:</p>

<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek">mysql: function dayofweek</a></li>
<li><a href="https://www.postgresql.org/docs/current/static/functions-datetime.html">postgresql: function datetime</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html">java: function DayOfWeek</a></li>
<li><a href="http://erlang.org/doc/man/calendar.html">erlang calendar</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Herramientas para el desarrollo que nos hacen la vida más fácil]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/09/08/herramienta-para-el-desarrollo-que-nos-hacen-la-vida-mas-facil/"/>
    <updated>2016-09-08T08:48:12-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/09/08/herramienta-para-el-desarrollo-que-nos-hacen-la-vida-mas-facil</id>
    <content type="html"><![CDATA[<h2>Editores</h2>

<ul>
<li><a href="https://www.jetbrains.com/pycharm/">PyCharm</a>: editor para Python.</li>
<li><a href="https://www.sublimetext.com/">Sublime Text</a></li>
</ul>


<h3>Plugins para Sublime Text</h3>

<p>Para llamar <a href="https://packagecontrol.io/installation">Package Control</a> desde Sublime Text: <code>Control+Shift+P</code>, escribe &ldquo;install&rdquo; y selecciona <code>Package Control: Install Package</code> en Command Palette.</p>

<ul>
<li><a href="https://github.com/kemayo/sublime-text-git">Git</a></li>
<li><a href="https://github.com/jisaacks/GitGutter">GitGutter</a></li>
<li><a href="https://packagecontrol.io/packages/Color%20Highlighter">Color Highlighter</a></li>
<li><a href="https://packagecontrol.io/packages/SublimeLinter">SublimeLinter</a></li>
<li>EditorConfig</li>
<li><a href="https://packagecontrol.io/packages/AngularJS">AngularJS</a></li>
<li>Markdown Extended</li>
<li><a href="https://habrahabr.ru/post/235901/">Лучшие плагины для Sublime Text</a></li>
<li><a href="https://habrahabr.ru/post/244681/">Sublime Text для фронтэнд-разработчика</a></li>
<li><a href="http://aslanbakan.com/en/blog/33-essential-sublime-text-plugins-for-all-developers/">33 Essential Sublime Text plugins for all developers</a></li>
</ul>


<h2>Editar y compartir código en línea</h2>

<ul>
<li><a href="http://codepen.io/">CodePen</a>: editor de código HTML/JS/CSS en línea.</li>
<li><a href="https://repl.it/languages/python3">repl.it</a>: editor de Python 3 que permite compartir el código.</li>
<li><a href="http://dillinger.io/">Dillinger</a>: editor de Markdown.</li>
</ul>


<h2>Bases de datos</h2>

<ul>
<li><a href="https://www.pgadmin.org/">pgAdmin</a>: administrador de base de datos PostgreSQL.</li>
<li><a href="https://sqlectron.github.io/">Sqlectron</a></li>
</ul>


<h2>Git</h2>

<ul>
<li><a href="https://www.gitkraken.com/">GitKraken</a></li>
<li><a href="https://github.com/Axiacore/axiacore_utils/tree/master/git-bash-prompt">Bash prompt</a> para mostrar mostrar información de un repositorio Git.</li>
</ul>


<h2>Screenshots</h2>

<ul>
<li><a href="http://shutter-project.org/">Shutter</a>: aplicación para tomar y editar screetshots en Linux.</li>
</ul>


<h2>REST</h2>

<ul>
<li><a href="https://www.getpostman.com/">PostMan</a>: es una extensión del Google Chrome, que permite el envío de peticiones HTTP.</li>
</ul>


<h2>Diff y validación</h2>

<ul>
<li><a href="https://www.diffchecker.com">Diffchecker</a>: comparar dos textos en línea.</li>
<li><a href="https://jsonformatter.curiousconcept.com/">JSON Formatter</a>: validar y formatear objetos JSON.</li>
</ul>


<h2>CSS/Iconos</h2>

<ul>
<li><a href="http://fontawesome.io/">Font Awesome</a></li>
<li><a href="https://chrome.google.com/webstore/detail/perfectpixel-by-welldonec/dkaagdgjmgdmbnecmcefdhjekcoceebi?hl=es">PerfectPixel</a>: ayuda comparar el diseño de la página web (visuales) con el resultado del mismo en el navegador.</li>
<li><a href="http://colorbrewer2.org/">Color Brewer 2.0</a>: color advice for cartography</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Las series que marcaron los años noventa en Rusia]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/09/04/las-series-que-marcaron-los-anos-noventa-en-rusia/"/>
    <updated>2016-09-04T18:29:40-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/09/04/las-series-que-marcaron-los-anos-noventa-en-rusia</id>
    <content type="html"><![CDATA[<h6>«Hélène et les garçons» (Francia)</h6>

<p>Una seria francesa acerca de un grupo de estudiantes: Helena y sus amigos.</p>

<p><img class="center" src="http://blog.vero4ka.info/images/elen.jpg" width="500" title="'Hélène et les garçons'" ></p>

<p><a href="https://www.youtube.com/watch?v=tndeSnIQ1Wk">https://www.youtube.com/watch?v=tndeSnIQ1Wk</a></p>

<!-- more -->


<h5>«Farmacia de guardia» (España)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/farmacia.jpg" width="500" title="'Farmacia de guardia'" ></p>

<p>Comedia española acerca de una farmacéutica separada Lourdes Cano, su ex esposo
y dos hijos, quienes están constantemente atrapados en situaciones ridículas.
La acción de la serie casi nunca fue más allá de las paredes de la farmacia -
la propiedad del personaje principal.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/q2xuCHG0E14" frameborder="0" allowfullscreen></iframe>


<h5>«Highlander» (Canadá, Francia)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/DUNKAN.jpg" width="500" title="'Highlander'" ></p>

<p>La serie acerca de las aventuras de un señor Duncan MacLeod - el representante
de la familia de los inmortales y que actualmente tiene 400 años de edad.
A lo largo de la serie el protagonista trata de sobrevivir en peleas con
otros miembros del clan.</p>

<p><a href="https://www.youtube.com/watch?v=k3VhPt_D8oQ">https://www.youtube.com/watch?v=k3VhPt_D8oQ</a></p>

<h5>«Spellbinder» (Australia, Polonia)</h5>

<p>Es una serie de televisión de ciencia ficción australiana acerca de
los estudiantes de colegio que se encuentran viajando entre los mundos paralelos.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/jyvSPp8lJzI?list=PLOychhOU3UPhnHVJwXqWSfQAWI8hBwZg5" frameborder="0" allowfullscreen></iframe>


<h5>«Fantaghirò, The Cave of the Golden Rose» (Italia)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/golden_rose.jpg" width="500" title="'The Cave of the Golden Rose'" ></p>

<p>Una seria italiana acerca de la princesa valiente Fantagiro que no puede vivir sin aventuras y por eso pretende ser un caballero.</p>

<h5>«Agatha Christie&rsquo;s Poirot» (Reino Unido)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/poirot.jpeg" width="500" title="'Agatha Christie's Poirot'" ></p>

<p>Una serie basa en los libros de Agatha Christie.</p>

<h5>«Dr. Quinn, Medicine Woman» (Estados Unidos)</h5>

<p>Una serie estadounidense acerca de una médica Michaela Quinn que proviene
de una familia rica y viaja al salvaje oeste para curar y salvar a los desfavorecidos.</p>

<p><img class="center" src="http://blog.vero4ka.info/images/medicine_woman.jpg" width="500" title="'Dr. Quinn, Medicine Woman'" ></p>

<h5>«Walker, Texas Ranger» (Estados Unidos)</h5>

<p>Cuando Chuck Norris corta cebolla, la cebolla llora.</p>

<h5>«Nash Bridges» (Estados Unidos)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/nash_bridges.jpg" width="500" title="'Nash Bridges'" ></p>

<h5>«Muñeca brava» (Argentina)</h5>

<p><img class="center" src="http://blog.vero4ka.info/images/muneca_brava.jpg" width="500" title="'Muñeca brava'" ></p>

<p>Y otros:</p>

<ul>
<li>Flipper (Estados Unidos)</li>
<li>Sunset Beach (Estados Unidos)</li>
<li>Babylon 5 (Estados Unidos)</li>
<li>Charmed (Estados Unidos)</li>
<li>Friends (Estados Unidos)</li>
<li>Xena: Warrior Princess (Estados Unidos, Nueva Zelanda)</li>
<li>Columbo (Estados Unidos)</li>
<li>Alf (Estados Unidos)</li>
<li>Beverly Hills, 90210 (Estados Unidos)</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Múltiples bases de datos en Django]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/08/31/multiples-bases-de-datos-en-django/"/>
    <updated>2016-08-31T11:15:01-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/08/31/multiples-bases-de-datos-en-django</id>
    <content type="html"><![CDATA[<p>Tenemos dos tablas con esquemas iguales dos en bases de datos diferentes: <code>production</code> y <code>history</code>.</p>

<figure class='code'><figcaption><span>settings.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">DATABASE_ROUTERS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;routers.HistoricRouter&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;production&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s">&#39;historical&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;history&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Escribimos un router para definir a qué base de datos hacer la petición:</p>

<figure class='code'><figcaption><span>routers.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">HistoricRouter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    A router to control all database operations on models in the historic application.</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">db_for_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Attempts to read historic models go to historical.</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s">&#39;historic&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&#39;historical&#39;</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Attempts to write historic models go to historical.</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s">&#39;historic&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&#39;historical&#39;</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">allow_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Allow relations if a model in the historic app is involved.</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">obj1</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s">&#39;historic&#39;</span> <span class="ow">or</span> \
</span><span class='line'>            <span class="n">obj2</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s">&#39;historic&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">allow_migrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Make sure the historic app only appears in the &#39;historical&#39; database.</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">app_label</span> <span class="o">==</span> <span class="s">&#39;historic&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">db</span> <span class="o">==</span> <span class="s">&#39;historical&#39;</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">None</span>
</span></code></pre></td></tr></table></div></figure>


<p>En nuestros modelos especificamos <code>app_label</code> para referirnos a la base de datos distinta a <code>default</code>:</p>

<figure class='code'><figcaption><span>models.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">db_table</span> <span class="o">=</span> <span class="s">&#39;authors&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">AbstractBook</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;books.Author&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;books&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">unmanaged</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">Book</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">db_table</span> <span class="o">=</span> <span class="s">&#39;books&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">HistoricBook</span><span class="p">(</span><span class="n">Book</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">unmanaged</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="n">db_table</span> <span class="o">=</span> <span class="s">&#39;books&#39;</span>
</span><span class='line'>        <span class="n">app_label</span> <span class="o">=</span> <span class="s">&#39;historic&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>La petición <code>Book.objects.all()</code> va a traer libros de la base de datos <code>production</code> y <code>HistoricBook.objects.all()</code> - de la base de datos <code>history</code>.</p>

<p>Modificando <code>allow_relation</code> en nuestro router, podemos permitir llaves foráneas entre modelos de diferentes bases de datos:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">allow_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="bp">True</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enlaces:</p>

<ul>
<li><a href="https://docs.djangoproject.com/en/1.10/topics/db/multi-db/#cross-database-relations">Django: Cross-database relations</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cómo hacer integración con Tpaga API usando Python]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/08/18/como-hacer-integracion-con-tpaga-api-usando-python/"/>
    <updated>2016-08-18T08:53:45-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/08/18/como-hacer-integracion-con-tpaga-api-usando-python</id>
    <content type="html"><![CDATA[<p><a href="https://tpaga.co/">Tpaga</a> es una plataforma que permite recibir pagos electrónicos. Tiene una estructura sencilla para entender y fácil para usar.</p>

<p>Para obtener nuestros claves de acceso y conectarnos con el API de Tpaga, creamos una cuenta en el &ldquo;sandbox&rdquo; de la plataforma: <a href="https://sandbox.tpaga.co/">sandbox.tpaga.co</a>.</p>

<p><img src="http://blog.vero4ka.info/images/tpaga_sandbox_login.png"></p>

<p>Al registrarnos podemos ver que ahora tenemos dos claves que podemos usar para la autenticación: <strong>Private Api Key</strong> y <strong>Public Api Key</strong>:</p>

<p><img src="http://blog.vero4ka.info/images/tpaga_sandbox_dashboard.png"></p>

<!-- more -->


<p>Tpaga tiene unos modelos básicos que nos permitirán organizar nuestros datos: <strong>Customers</strong> (Clientes), <strong>Credit Cards</strong> (Tarjetas de crédito) asociados a los Clientes y <strong>Charges</strong> (Transacciónes o cobros por tarjeta de crédito).</p>

<p>Ahora, cuando entendemos la estructura, podemos empezar a escribir nuestro programa en Python. Primero instalamos la librería <code>requests</code> que nos permitirá hacer peticiones HTTP.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install requests
</span></code></pre></td></tr></table></div></figure>


<p>Tpaga, como muchos otros sitios web, acepta la autenticación mediante HTTP Basic Auth. La librería <code>requests</code> provee una forma fácil de usarla:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">requests</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">TPAGA_PRIVATE_TOKEN</span> <span class="o">=</span> <span class="s">&#39;d13fr8n7vhvkuch3lq2ds5qhjnd2pdd2&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">tpaga_url</span> <span class="o">=</span> <span class="s">&#39;https://sandbox.tpaga.co/api/customer&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">tpaga_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{},</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">TPAGA_PRIVATE_TOKEN</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Response</span> <span class="p">[</span><span class="mi">201</span><span class="p">]</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Escribimos un código sencillo que nos permitirá conectarse al API de Tpaga y mandar peticiones:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">parse</span> <span class="k">as</span> <span class="n">urlparse</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">requests</span>
</span><span class='line'>
</span><span class='line'><span class="n">TPAGA_PRIVATE_TOKEN</span> <span class="o">=</span> <span class="s">&#39;d13fr8n7vhvkuch3lq2ds5qhjnd2pdd2&#39;</span>
</span><span class='line'><span class="n">TPAGA_API_URL</span> <span class="o">=</span> <span class="s">&#39;https://sandbox.tpaga.co/api/&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">TpagaTestClient</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
</span><span class='line'>            <span class="bp">self</span><span class="p">,</span>
</span><span class='line'>            <span class="n">private_token</span><span class="o">=</span><span class="n">TPAGA_PRIVATE_TOKEN</span><span class="p">,</span>
</span><span class='line'>            <span class="n">base_url</span><span class="o">=</span><span class="n">TPAGA_API_URL</span><span class="p">,</span>
</span><span class='line'>    <span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">private_token</span> <span class="o">=</span> <span class="n">private_token</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">api_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
</span><span class='line'>            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">private_token</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
</span><span class='line'>            <span class="n">urlparse</span><span class="o">.</span><span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_url</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span>
</span><span class='line'>            <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">fail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span class='line'>            <span class="s">&#39;Whoops, got</span><span class="se">\n\n</span><span class="s">STATUS: {}</span><span class="se">\n\n</span><span class="s">HEADERS: {}</span><span class="se">\n\n</span><span class="s">CONTENT: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span class='line'>                <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span>
</span><span class='line'>                <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
</span><span class='line'>                <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
</span><span class='line'>            <span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">json_from_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">expected_http_code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">expected_http_code</span><span class="p">:</span>
</span><span class='line'>            <span class="n">expected_http_code</span> <span class="o">=</span> <span class="p">[</span><span class="mi">201</span><span class="p">]</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expected_http_code</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>El método <code>__init__</code> nos va a inicializar nuestro cliente, <code>api_post</code> - mandar peticiones POST a la ruta especificada (<code>path</code>) del API, <code>json_from_response</code> - obtener un objeto JSON de la respuesta de API, <code>fail</code> - imprimir los detalles de la respuesta si la petición no ha terminado con éxito.</p>

<h3>Crear un cliente</h3>

<p>Para crear nuestro cliente, vamos a enviar una petición POST al endpoint <code>/customer</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">TpagaTestClient</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">create_customer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span class='line'>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_post</span><span class="p">(</span><span class="s">&#39;customer&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;</span> <span class="n">client</span> <span class="o">=</span> <span class="n">TpagaTestClient</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">customer</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_customer</span><span class="p">({</span>
</span><span class='line'>    <span class="s">&#39;firstName&#39;</span><span class="p">:</span> <span class="s">&#39;Horns and Hoofs&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;lastName&#39;</span><span class="p">:</span> <span class="s">&#39;Perez&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;hornsandhoofs@example.com&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;phone&#39;</span><span class="p">:</span> <span class="s">&#39;012345678&#39;</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">customer_token</span> <span class="o">=</span> <span class="n">customer</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&#39;customer_token&#39;</span><span class="p">,</span> <span class="n">customer_token</span><span class="p">)</span>
</span><span class='line'><span class="n">customer_token</span> <span class="n">qoodmh04sh7ghpp58opn5g0hssg4slq0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Otros campos que podemos enviar para guardar nuestros clientes se puede encontrar aquí: <a href="https://tpaga.co/docs/swaggers/v2#!/Customer/createCustomer">tpaga.co/docs/swaggers/v2#!/Customer/createCustomer</a>.</p>

<p>En el dashboard de Tpaga podemos asegurarnos de que el ciente <a href="https://en.wikipedia.org/wiki/The_Little_Golden_Calf#Cultural_influence">&ldquo;Horns and Hoofs&rdquo;</a> fue creado exitosamente:</p>

<p><img src="http://blog.vero4ka.info/images/tpaga_dashboard_customers.png"></p>

<p>Teniendo un token de nuestro cliente, podemos agregarle una tarjeta de crédito.</p>

<h3>Registrar una tarjeta de crédito y asociarla al cliente</h3>

<p>La creación de la tarjeta de crédito se realiza en dos pasos: tokenizar la tarjeta y asociarla un cliente.</p>

<p>Tpaga usa <strong>tokenización</strong>, que nos permite registrar las tarjetas de crédito de nuestros clientes de forma segura. Los clientes ingresan los datos en nuestro sitio web, y estos datos los enviamos directamente al API de Tpaga (desde el código JavaScript), allí serán tokenizados y Tpaga nos devuelve un token temporal con el que podemos proceder con el registro de la tarjeta (desde el código Python).</p>

<p>Creamos un formulario HTML para obtener los datos de la tarjeta de crédito:</p>

<p><img src="http://blog.vero4ka.info/images/tpaga_credit_card_form.png"></p>

<p>Para hacer un formulario bonito, usamos <a href="http://bootsnipp.com/snippets/featured/credit-card-payment-with-stripe">la plantilla de Bootstrap</a> y las librerías <a href="https://jquery.com/">jQuery</a>, <a href="https://jqueryvalidation.org/">jQuery Validation Plugin</a> y <a href="https://github.com/stripe/jquery.payment">jQuery.payment</a> para validar los datos.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;credit_card_form&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">name=</span><span class="s">&quot;credit_card_form&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-12&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">id=</span><span class="s">&quot;div_id_primaryAccountNumber&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label requiredField&quot;</span> <span class="na">for=</span><span class="s">&quot;id_primaryAccountNumber&quot;</span><span class="nt">&gt;</span>Número de la tarjeta<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;textinput textInput form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;id_primaryAccountNumber&quot;</span> <span class="na">name=</span><span class="s">&quot;primaryAccountNumber&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;input-group-addon&quot;</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-credit-card&quot;</span><span class="nt">&gt;&lt;/i&gt;&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-12&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">id=</span><span class="s">&quot;div_id_cardHolderName&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label requiredField&quot;</span> <span class="na">for=</span><span class="s">&quot;id_cardHolderName&quot;</span><span class="nt">&gt;</span>Nombre del tarjetahabiente<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;textinput textInput form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;id_cardHolderName&quot;</span> <span class="na">name=</span><span class="s">&quot;cardHolderName&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-3&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">id=</span><span class="s">&quot;div_id_expirationMonth&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label requiredField&quot;</span> <span class="na">for=</span><span class="s">&quot;id_expirationMonth&quot;</span><span class="nt">&gt;</span>Fecha de expiración<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;select form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;id_expirationMonth&quot;</span> <span class="na">name=</span><span class="s">&quot;expirationMonth&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;01&quot;</span><span class="nt">&gt;</span>Enero<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;02&quot;</span><span class="nt">&gt;</span>Febrero<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;03&quot;</span><span class="nt">&gt;</span>Marzo<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;04&quot;</span><span class="nt">&gt;</span>Abril<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;05&quot;</span><span class="nt">&gt;</span>Mayo<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;06&quot;</span><span class="nt">&gt;</span>Junio<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;07&quot;</span><span class="nt">&gt;</span>Julio<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;08&quot;</span><span class="nt">&gt;</span>Agosto<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;09&quot;</span><span class="nt">&gt;</span>Septiembre<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>Octubre<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;11&quot;</span><span class="nt">&gt;</span>Noviembre<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span><span class="nt">&gt;</span>Diciembre<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-3&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">id=</span><span class="s">&quot;div_id_expirationYear&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label requiredField&quot;</span> <span class="na">for=</span><span class="s">&quot;id_expirationYear&quot;</span><span class="nt">&gt;</span>Año<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;select form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;id_expirationYear&quot;</span> <span class="na">name=</span><span class="s">&quot;expirationYear&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2016&quot;</span><span class="nt">&gt;</span>2016<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2017&quot;</span><span class="nt">&gt;</span>2017<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2018&quot;</span><span class="nt">&gt;</span>2018<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2019&quot;</span><span class="nt">&gt;</span>2019<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2020&quot;</span><span class="nt">&gt;</span>2020<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2021&quot;</span><span class="nt">&gt;</span>2021<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2022&quot;</span><span class="nt">&gt;</span>2022<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2023&quot;</span><span class="nt">&gt;</span>2023<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2024&quot;</span><span class="nt">&gt;</span>2024<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>              <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2025&quot;</span><span class="nt">&gt;</span>2025<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-xs-3 pull-right&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">id=</span><span class="s">&quot;div_id_cvc&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label requiredField&quot;</span> <span class="na">for=</span><span class="s">&quot;id_cvc&quot;</span><span class="nt">&gt;</span>CVC<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;textinput textInput form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;id_cvc&quot;</span> <span class="na">maxlength=</span><span class="s">&quot;10&quot;</span> <span class="na">name=</span><span class="s">&quot;cvc&quot;</span> <span class="na">required=</span><span class="s">&quot;&quot;</span> <span class="na">type=</span><span class="s">&quot;password&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;buttonHolder&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary bg-purple&quot;</span> <span class="na">id=</span><span class="s">&quot;submit-id-submit&quot;</span> <span class="na">name=</span><span class="s">&quot;submit&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Guardar&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Al final, tenemos un formulario con los siguientes campos:</p>

<ul>
<li><code>primaryAccountNumber</code> para el número de la tarjeta,</li>
<li><code>cardHolderName</code> para el nombre del tarjetahabiente,</li>
<li><code>expirationMonth</code> para el mes de expiración,</li>
<li><code>expirationYear</code> para el año de expiración,</li>
<li><code>cvc</code> para el código CVC.</li>
</ul>


<p>Creamos otro formulario oculto que usaremos para enviar el token temporal de la tarjeta de crédito a nuestro servidor:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;associate_customer_cc_form&quot;</span> <span class="na">action=</span><span class="s">&quot;/asociar-cliente-tarjeta-credito&quot;</span> <span class="na">method=</span><span class="s">&quot;POST&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;tmp_cc_token&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>En el código JavaScript obtenemos los datos de la tarjeta de crédito y los enviamos al endpoint de Tpaga <code>tokenize/credit_card</code>. Este endpoint convierte los datos sensibles de la tarjeta en un token, el cual será empleado para ejecutar el procesamiento de las transacciones sin necesidad que los datos sensibles del tarjetahabiente pasen por nuestro servidor. Si la información de la tarjeta tiene errores, Tpaga nos devuelve un JSON con el nombre de campo y el mensaje de error, y en el caso contrario - token temporal de la tarjeta.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">serializeObject</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">serializeArray</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">push</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">]];</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">o</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">associate_customer_cc</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">text_status</span><span class="p">,</span> <span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[name=&quot;tmp_cc_token&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">// Enviar el token temporal a nuestro servidor</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#associate_customer_cc_form&#39;</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">show_errors</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">text_status</span><span class="p">,</span> <span class="nx">error_thrown</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Mostrar errores de validación</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.row&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;Error de autenticación a la plataforma de pagos.&#39;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">422</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.row&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;Datos erróneos en el campo &#39;</span> <span class="o">+</span> <span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form label[for=&quot;id_&#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">field</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">()));</span>
</span><span class='line'>          <span class="k">return</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">tokenize_credit_card</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.row&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.payment-errors&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">tpaga_public_key</span> <span class="o">=</span> <span class="s1">&#39;pk_test_qvbvuthlvqpijnr0elmtg5jh&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Enviar los datos de la tarjeta directamente a Tpaga y obtener el token temporal</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="s1">&#39;https://sandbox.tpaga.co/api/tokenize/credit_card&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">beforeSend</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span> <span class="s1">&#39;Basic &#39;</span> <span class="o">+</span> <span class="nx">btoa</span><span class="p">(</span><span class="nx">tpaga_public_key</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">));</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">username</span><span class="o">:</span> <span class="nx">tpaga_public_key</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">data</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">serializeObject</span><span class="p">()),</span>
</span><span class='line'>      <span class="nx">contentType</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">success</span><span class="o">:</span> <span class="nx">associate_customer_cc</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">error</span><span class="o">:</span> <span class="nx">show_errors</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#credit_card_form&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">tokenize_credit_card</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>donde <code>tpaga_public_key</code> es <strong>la llave PÚBLICA</strong> que copiamos desde el dashboard de Tpaga.</p>

<p>Ahora usando el token temporal de la tarjeta (<code>tmp_cc_token</code>) podemos asociarla al cliente:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">TpagaTestClient</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">assoc_cc_to_customer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer_token</span><span class="p">,</span> <span class="n">cc_temp_token</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="n">cdata</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="n">cc_temp_token</span> <span class="p">}</span>
</span><span class='line'>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_post</span><span class="p">(</span>
</span><span class='line'>            <span class="s">&#39;customer/{}/credit_card_token&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">customer_token</span><span class="p">),</span> <span class="n">cdata</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;</span> <span class="n">cc_temp_token</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">&#39;tmp_cc_token&#39;</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">credit_card</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">assoc_cc_to_customer</span><span class="p">(</span>
</span><span class='line'>    <span class="n">customer_token</span><span class="o">=</span><span class="n">customer_token</span><span class="p">,</span>
</span><span class='line'>    <span class="n">cc_temp_token</span><span class="o">=</span><span class="n">cc_temp_token</span><span class="p">,</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">credit_card_token</span> <span class="o">=</span> <span class="n">credit_card</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="s">&#39;credit_card_token&#39;</span><span class="p">,</span> <span class="n">credit_card_token</span><span class="p">)</span>
</span><span class='line'><span class="n">credit_card_token</span> <span class="mi">2</span><span class="n">k54foql0hki0ot7avrg9nhpvbpqam55</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mirando la tabla de <a href="https://sandbox.tpaga.co/merchantDashboard/cards">sandbox.tpaga.co/merchantDashboard/cards</a> vemos que nuestra tarjeta quedó registrada con Tpaga.</p>

<p>Opcionalmente, dependiendo de la configuración de nuestra cuenta en Tpaga, Tpaga puede hacer un cargo de prueba a la tarjeta de crédito al crearla, automáticamente. En este caso, el valor la respuesta <code>response['validationCharge']['successful']</code> nos indica si el pago fue exisoto, y <code>response['validationCharge']['errorCode']</code> tiene el código de error. Por ejemplo:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;r6ae7t2u7dmt7injv5c2bg9sqbh0krtr&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;addressLine2&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;addressCountry&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;addressState&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;expirationMonth&#39;</span><span class="p">:</span> <span class="s">&#39;03&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;lastFour&#39;</span><span class="p">:</span> <span class="s">&#39;0004&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;bin&#39;</span><span class="p">:</span> <span class="s">&#39;404000&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;fingerprint&#39;</span><span class="p">:</span> <span class="s">&#39;812a1abf6c03db89bdf91025687fe5a77e24065a652860445e45e62fce3a2858&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;addressCity&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;addressPostalCode&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;VISA&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;cardHolderName&#39;</span><span class="p">:</span> <span class="s">&#39;Иван Иваныч&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;customer&#39;</span><span class="p">:</span> <span class="s">&#39;qoodmh04sh7ghpp58opn5g0hssg4slq0&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;validationCharge&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;successful&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;errorCode&#39;</span><span class="p">:</span> <span class="s">&#39;04&#39;</span><span class="p">},</span>
</span><span class='line'>    <span class="s">&#39;addressLine1&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;expirationYear&#39;</span><span class="p">:</span> <span class="s">&#39;2018&#39;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Realizar el pago por la tarjeta de crédito</h3>

<p>Con el token de la tarjeta de crédito, que obtuvimos en el paso anterior, ahora podemos realizar pagos. Para eso enviemos una petición POST al <a href="https://tpaga.co/docs/swaggers/v2#!/Charge/addCreditCardCharge">addCreditCardCharge</a> endpoint con los siguientes parametros:</p>

<ul>
<li><code>orderId</code> - nuestro id interno que asociamos al pago, que luego nos ayudaría a identificar la transacción en el dashboard de Tpaga;</li>
<li><code>amount</code>- cantidad de dinero para cobrar,</li>
<li><code>currency</code>- tipo de moneda, por ejemplo, &lsquo;COP&rsquo;,</li>
<li><code>creditCard</code> - token de la tarjeta de crédito.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">TpagaTestClient</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">charge_cc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cc_token</span><span class="p">,</span> <span class="n">order_id</span><span class="o">=</span><span class="s">&#39;BRG-2&#39;</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
</span><span class='line'>        <span class="n">cdata</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>              <span class="s">&#39;orderId&#39;</span><span class="p">:</span> <span class="n">order_id</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;currency&#39;</span><span class="p">:</span> <span class="s">&#39;COP&#39;</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;taxAmount&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">&#39;One bridge in good condition.&#39;</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;installments&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
</span><span class='line'>              <span class="s">&#39;creditCard&#39;</span><span class="p">:</span> <span class="n">cc_token</span><span class="p">,</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_post</span><span class="p">(</span><span class="s">&#39;charge/credit_card&#39;</span><span class="p">,</span> <span class="n">cdata</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">refund_cc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cc_charge_id</span><span class="p">):</span>
</span><span class='line'>        <span class="n">cdata</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">cc_charge_id</span><span class="p">,</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_post</span><span class="p">(</span><span class="s">&#39;refund/credit_card&#39;</span><span class="p">,</span> <span class="n">cdata</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">json_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">expected_http_code</span><span class="o">=</span><span class="p">[</span><span class="mi">202</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;</span> <span class="n">charge_cc_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">charge_cc</span><span class="p">(</span><span class="n">cc_token</span><span class="o">=</span><span class="n">credit_card_token</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">4500</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="n">cc_charge_id</span> <span class="o">=</span> <span class="n">charge_cc_response</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="s">&#39;charge_cc_response&#39;</span><span class="p">,</span> <span class="n">charge_cc_response</span><span class="p">)</span>
</span><span class='line'><span class="n">charge_cc_response</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1rnfu463258eph0mlqli4105mjb85kut&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;creditCard&#39;</span><span class="p">:</span> <span class="s">&#39;ifmjd9rbe8peqdjh09pln702306nfniu&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;thirdPartyId&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;installments&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;tpagaFeeAmount&#39;</span><span class="p">:</span> <span class="s">&#39;868.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;customer&#39;</span><span class="p">:</span> <span class="s">&#39;gl01l74skk0po9afrjiaaclt0hr5acsh&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;iacAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;transactionInfo&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;authorizationCode&#39;</span><span class="p">:</span> <span class="s">&#39;723045&#39;</span><span class="p">,</span>  <span class="c"># código de transacción del banco</span>
</span><span class='line'>        <span class="s">&#39;status&#39;</span><span class="p">:</span> <span class="s">&#39;authorized&#39;</span><span class="p">,</span>  <span class="c"># Posibles valores: created, fraudulent,</span>
</span><span class='line'>                                 <span class="c"># settled, processor_declined, authorized,</span>
</span><span class='line'>                                 <span class="c"># voided</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s">&#39;netAmount&#39;</span><span class="p">:</span> <span class="s">&#39;3545.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;tipAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteIvaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteIcaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;19.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;paid&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteRentaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;68.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;paymentTransaction&#39;</span><span class="p">:</span> <span class="s">&#39;tta2hlk0e5n5dgr4kggm5j6vv8qoh3jP&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;orderId&#39;</span><span class="p">:</span> <span class="s">&#39;BRG-2&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">&#39;One bridge in good condition.&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;currency&#39;</span><span class="p">:</span> <span class="s">&#39;COP&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;errorMessage&#39;</span><span class="p">:</span> <span class="s">&#39;Approved&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;taxAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;errorCode&#39;</span><span class="p">:</span> <span class="s">&#39;00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="s">&#39;4500.00&#39;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Si el pago fue exitoso, el código de respuesta es <code>201</code> y en el JSON podemos ver que la llave <code>paid</code> es <code>True</code> y <code>amount</code> es igual al valor cobrado de la tarjeta.</p>

<p>En el caso cuando el código de respuesta es <code>402</code>, tendríamos fijarnos en los valores de <code>errorCode</code> y <code>errorMessage</code> para entender qué pasó con la transacción. Por ejemplo, el código de error <code>43</code> significa que el dueño de la tarjeta la reportó como robada, y <code>61</code> - que el monto máximo de tarjeta fue excedido.</p>

<p>En otros casos necesitaremos verificar que los datos que pasamos en la petición sean válidos y tengan todos los valores necesarios.</p>

<h3>Revertir el pago</h3>

<p>Los bancos nos permiten revertir el pago dentro de 24 horas después de la transacción. Para hacerlo debemos mandar token de la transacción que queremos revertir al <a href="https://tpaga.co/docs/swaggers/v2#!/Credit_Card/refundCreditCardCharge">refundCreditCardCharge</a> endpoint.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;</span> <span class="n">refund_cc_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">refund_cc</span><span class="p">(</span><span class="n">cc_charge_id</span><span class="p">)</span>
</span><span class='line'><span class="o">&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&#39;refund_cc_response&#39;</span><span class="p">,</span> <span class="n">refund_cc_response</span><span class="p">)</span>
</span><span class='line'><span class="n">refund_cc_response</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1rnfu463258eph0mlqli4105mjb85kut&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;creditCard&#39;</span><span class="p">:</span> <span class="s">&#39;ifmjd9rbe8peqdjh09pln702306nfniu&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;thirdPartyId&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;installments&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;tpagaFeeAmount&#39;</span><span class="p">:</span> <span class="s">&#39;868.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;customer&#39;</span><span class="p">:</span> <span class="s">&#39;gl01l74skk0po9afrjiaaclt0hr5acsh&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;iacAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;transactionInfo&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;authorizationCode&#39;</span><span class="p">:</span> <span class="s">&#39;723045&#39;</span><span class="p">,</span> <span class="s">&#39;status&#39;</span><span class="p">:</span> <span class="s">&#39;voided&#39;</span><span class="p">},</span>
</span><span class='line'>    <span class="s">&#39;netAmount&#39;</span><span class="p">:</span> <span class="s">&#39;3545.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;tipAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteIvaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteIcaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;19.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;paid&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;reteRentaAmount&#39;</span><span class="p">:</span> <span class="s">&#39;68.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;paymentTransaction&#39;</span><span class="p">:</span> <span class="s">&#39;tta2hlk0e5n5dgr4kggm5j6vv8qoh3jP&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;orderId&#39;</span><span class="p">:</span> <span class="s">&#39;BRG-2&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="s">&#39;One bridge in good condition.&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;currency&#39;</span><span class="p">:</span> <span class="s">&#39;COP&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;errorMessage&#39;</span><span class="p">:</span> <span class="s">&#39;Approved&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;taxAmount&#39;</span><span class="p">:</span> <span class="s">&#39;0.00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;errorCode&#39;</span><span class="p">:</span> <span class="s">&#39;00&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="s">&#39;4500.00&#39;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>El JSON que nos devolvió Tpaga <code>transactionInfo.status</code> aparece como <code>voided</code> y el valor de <code>paid</code> ahora es falso:</p>

<p><img src="http://blog.vero4ka.info/images/tpaga_dashboard_refund.png"></p>

<p>Enlaces:</p>

<ul>
<li>Documentación de Tpaga: <a href="https://tpaga.co/docs/swaggers/v2">tpaga.co/docs/swaggers/v2</a></li>
<li>Tpaga FAQ: <a href="https://tpaga.zendesk.com/hc/es">tpaga.zendesk.com/hc/es</a></li>
<li>Documentación para la librería <a href="http://docs.python-requests.org/en/master/">Requests: HTTP for Humans</a></li>
<li>Un ejemplo de integración con Tpaga usando PHP/JavaScript: <a href="https://github.com/Tpaga/tpaga-php-example-backend/">Tpaga/tpaga-php-example-backend</a></li>
</ul>


<p>Muchas gracias a <a href="https://twitter.com/jerojasro">@jerojasro</a> por su ayuda y paciencia.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[No llevas leña]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/08/05/no-llevas-lena/"/>
    <updated>2016-08-05T09:57:59-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/08/05/no-llevas-lena</id>
    <content type="html"><![CDATA[<p>El bus lleno de Buratinos* va a toda velocidad.  En algún momento el conductor
frena duro, y escucha las voces enojadas del los pasajeros:
“¡Ey, señor conductor, no lleva la leña!”</p>

<p><em>*Buratino es Pinocchio en ruso.</em></p>

<p><img class="center" src="http://blog.vero4ka.info/images/buratino.jpg"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[El colegio]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/07/30/el-colegio/"/>
    <updated>2016-07-30T18:40:16-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/07/30/el-colegio</id>
    <content type="html"><![CDATA[<p>Nunca me gustaba ir al colegio y siempre he contado cuánto falta hasta el
último día de encarcelamiento.</p>

<p>Entré al colegio cuando tenía 7 años. Normalmente los niños entran un año
antes, pero a mis 6 me dijeron que la niña era demasiado pequeña. Durante
12 meses no crecí mucho, pero ya que no tuvieron razones de no aceptarme.</p>

<p>Mi primer día no me gustó: habían muchos niños a quienes no conocía y no
quería conocerlos, que se movían por el salón de una forma caótica y hacían
mucho ruido. Me pusieron en la última mesa del aula junto a la ventana.
En la primera clase a profesora nos dijo que sacaramos nuestros cuadernos
de las maletas y dibujaramos algo. Eso fue un estrés total: no pude abrir
mi maleta. Como tuve que manejar la cerradura por primera vez en mi vida,
no supe cómo funcionaba y claro que el panico, que llegó inmediatamente,
no me permitió pensar con claridad.</p>

<p>Del primer grado sólo recuerdo cómo nos enseñaban caligrafía: tuvimos
que escribir las mismas letras muchas veces. Entonces al final se quedaron
varias páginas con “а”, “б”, “в”, etc.</p>

<p>En el segundo grado nos muvieron a otro edificio y empezamos a prestar
servicio. Cada grupo por turnos tuvo que estar de servicio en el colegio
durante toda la semana. Esto segnificaba que tuvimos que llegar 30 minutos
antes que todos los demás.  Nos reunían en el primer piso y decían a cada
no su cargo. Habían varios tipos de cargos: unos tuvieron que estar en
la entrada del edificio y en las entradas de cada piso y decir a cada niño
que pasaba: “¡Smenka!”. “Smenka” significa “los zapatos de cambio”.
En el invierno la nieve se metía en las indiduras de los zapatos y cuando
uno entraba al edificio se derretía y dejaba charcos. Por eso por el orden
“¡Smenka!” el estudiante tuvo que levantar el pie y mostrar la suela.
Si estaba mojada “el guardia” tuvo que detenerlo y mandarlo a la casa por
los zapatos de cambio. Ese cargo no me gustaba porque los otros estudiantes
lo tomaban como un deporte lograr pasar con los zapatos que llevaban puestos
en la calle, entonces inventaban trucos para confundir la guardia o
simplemente corrían de nosotros. Entonces había otro cargo: vigilar
los corredores, detener los estudiantes que corrían y mandarles
al director del colegio.</p>

<p>Existía un cargo que era el más agradable de todos: estar en la cafetería.
Había que ordenar las mesas y las sillas y antes de las horas del desayuno
y almuerzo había que servir la comida y después recoger los platos.</p>

<p>Después de las clases nos quedábamos por una hora para limpiar todo el colegio.</p>

<p>Tuvimos 4 periodos y 4 vacaciones: 3 cortas y umas largas de tres meses
en verano. Para las vacaciones de verano nos daban una lista de libros para
leer. Como durante los estudios casi no tuvimos tiempo para la lectura,
tuvimos que pasar por todos los libros del curso de literatura antrs de
que empezara el año escolar. A pesar de que leía de 3 a 5 horas al día no
alcanzaba leer todos los libros del listado. Me gusta leer mucho, pero
odiaba las clases de literatura. La parte más tonta era memorizar los poemas.
Tuvimos que recitar de memoria los poemas de Homero, Pushkin, Lermontov,
Tiútchev, Mayakovski, Blok y muchos otros. A cada uno llamaban a la pizarra
y tuvimos que declamar frente al grupo. Así los profesores lograron que hasta
la mejor poesía pudiera provocar un reflejo vomitivo. Pero creo que era la
mejor forma de instalar los pensamientos de otras personas a las mentes
inmaduras. Hasta ahora cuando veo una tormenta fuerte a veces se me ocurren
las estrofas de Tiútchev:</p>

<p>Люблю грозу в начале мая (Me gustan las tormentas a principios de mayo) /
Когда весенний первый гром (Cuando el primer trueno primaveral) /
Как бы резвяся и играя (Como haciendo travesuras y jugando) /
Грохочет в небе голубом (Trona en el cielo azul).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monitoreo de acciones de usuarios en Flask (SQLAlchemy)]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/07/22/monitoreo-de-acciones-de-usuarios-en-flask-sqlalchemy/"/>
    <updated>2016-07-22T08:23:58-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/07/22/monitoreo-de-acciones-de-usuarios-en-flask-sqlalchemy</id>
    <content type="html"><![CDATA[<p>Suponemos que en nuestro proyecto de Flask hay un modelo <code>Client</code> definidao usando <a href="http://flask-sqlalchemy.pocoo.org/">Flask-SQLAlchemy</a> y queremos monetorear los cambios que se realizan sobre los objetos de ese modelo.</p>

<p>Para esto agregamos tres señales:</p>

<figure class='code'><figcaption><span>models.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">event</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">main.signals</span> <span class="kn">import</span> <span class="n">receive_before_update</span><span class="p">,</span> <span class="n">receive_before_insert</span><span class="p">,</span> <span class="n">receive_before_delete</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>
</span><span class='line'>    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">phone</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="s">&#39;before_insert&#39;</span><span class="p">,</span> <span class="n">receive_before_insert</span><span class="p">)</span>
</span><span class='line'><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="s">&#39;before_update&#39;</span><span class="p">,</span> <span class="n">receive_before_update</span><span class="p">)</span>
</span><span class='line'><span class="n">event</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">Client</span><span class="p">,</span> <span class="s">&#39;before_delete&#39;</span><span class="p">,</span> <span class="n">receive_before_delete</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>EN el gódigo de cada señal llamamos los métodos <code>inspect()</code> y <code>get_history()</code> para detectar los cambios sobre el objeto:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">state</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">client_object</span><span class="p">)</span>
</span><span class='line'><span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
</span><span class='line'>     <span class="n">hist</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">get_history</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Por ejemplo, para el atributo <code>name</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="err">&#39;added&#39;:</span> <span class="err">[&#39;Company</span> <span class="err">A&#39;],</span>
</span><span class='line'>    <span class="err">&#39;deleted&#39;:</span> <span class="err">[&#39;Company</span> <span class="err">B&#39;],</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>El mégoto <code>get_history()</code> nos devuelve un objeto <code>sqlalchemy.orm.attributes.History</code> que tiene los siguientes atributos:</p>

<ul>
<li><code>added</code> - listado de valores agregados al atributo de nuestro objeto</li>
<li><code>deleted</code> - listado de valores eliminados del atributo de nuestro objeto</li>
<li><code>unchanged</code> - listado de valores del atributo de nuestro objeto que se quedaron intactos</li>
<li><code>has_changes()</code> - método que retorna <code>True</code> si no habían ningunos cambios de valor de nuestro atributo.</li>
</ul>


<p>Ahora, usando la variable <code>current_user</code> de la biblioteca <a href="https://flask-login.readthedocs.io/">Flask-Login</a>, podemos guargar el usuario que realizó los cambios:</p>

<figure class='code'><figcaption><span>signals.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">flask_login</span> <span class="kn">import</span> <span class="n">current_user</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">save_changes</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">state</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span class='line'>        <span class="n">changes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
</span><span class='line'>            <span class="n">hist</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">get_history</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="ow">not</span> <span class="n">hist</span><span class="o">.</span><span class="n">has_changes</span><span class="p">():</span>
</span><span class='line'>                <span class="k">continue</span>
</span><span class='line'>            <span class="n">added</span> <span class="o">=</span> <span class="n">format_changes_value</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">added</span><span class="p">)</span>
</span><span class='line'>            <span class="n">deleted</span> <span class="o">=</span> <span class="n">format_changes_value</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">deleted</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">added</span> <span class="o">!=</span> <span class="n">deleted</span><span class="p">:</span>
</span><span class='line'>                <span class="n">changes</span><span class="p">[</span><span class="n">attr</span><span class="o">.</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s">&#39;added&#39;</span><span class="p">:</span> <span class="n">added</span><span class="p">,</span>
</span><span class='line'>                    <span class="s">&#39;deleted&#39;</span><span class="p">:</span> <span class="n">deleted</span><span class="p">,</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">changes</span><span class="p">:</span>
</span><span class='line'>            <span class="n">mongo</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">user_logs</span><span class="o">.</span><span class="n">insert_one</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span>
</span><span class='line'>                <span class="n">current_user_id</span><span class="o">=</span><span class="n">current_user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span class='line'>                <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
</span><span class='line'>                <span class="n">table_name</span><span class="o">=</span><span class="n">target</span><span class="o">.</span><span class="n">__tablename__</span><span class="p">,</span>
</span><span class='line'>                <span class="n">object_id</span><span class="o">=</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span class='line'>                <span class="n">changes</span><span class="o">=</span><span class="n">changes</span><span class="p">,</span>
</span><span class='line'>                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">(),</span>
</span><span class='line'>            <span class="p">))</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">receive_before_insert</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span class='line'>    <span class="n">save_changes</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s">&#39;create&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">receive_before_update</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span class='line'>    <span class="n">save_changes</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s">&#39;update&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">receive_before_delete</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span class='line'>    <span class="n">save_changes</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s">&#39;delete&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Flask for Django developers]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/07/22/flask-for-django-developers/"/>
    <updated>2016-07-22T07:35:02-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/07/22/flask-for-django-developers</id>
    <content type="html"><![CDATA[<ol>
<li>Aplicación básica</li>
<li>Blueprints</li>
<li>URLs</li>
<li>Vistas</li>
<li>Plantillas (Jinja2)</li>
<li>Procesadores de contexto</li>
<li>Modelos (SQLAlchemy, CRUD)</li>
<li>Formularios</li>
<li>Autenticación</li>
<li>Múltiples idiomas</li>
<li>Mensajes (flash)</li>
<li>Cache</li>
</ol>


<iframe src="//slides.com/vero4ka/flask-para-desarrolladorres-de-django/embed?style=light" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>


<ul>
<li>Slides: <a href="http://slides.com/vero4ka/flask-para-desarrolladorres-de-django/">http://slides.com/vero4ka/flask-para-desarrolladorres-de-django/</a></li>
<li>Examples: <a href="https://github.com/vero4karu/flask-examples">https://github.com/vero4karu/flask-examples</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Las temporadas]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/07/20/las-temporadas/"/>
    <updated>2016-07-20T18:34:10-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/07/20/las-temporadas</id>
    <content type="html"><![CDATA[<p>A veces me parece que aquí el tiempo no se mueve. A veces me digo:
“El verano pasado…” – o – “El próximo invierno”, y luego me doy cuenta
que no hay ningún verano, ni invierno, ni primavera, ni otoño. Y eso da
el sentido que no cambia nada, pero cuando uno mira atrás, así llega uno
a horrorizarse de cuánto tiempo ha pasado.</p>

<p>Pero antes todo era diferente…</p>

<p>Todo el verano sentía euforia de que por fin hacía calor y todo alrededor
estaba verde. Podía mirar por horas cómo se movían las ramas de los árboles
con el viento, aspirar el aire lleno de olores y escuchar los sonidos del bosque.
Parecía que todo el mundo estaba feliz: los niños por fin tenían sus vacaciones,
sacaban sus bicicletas y patines y salían a jugar afuera, las muchachas se
desvestían tratando de exponer más de su cuerpo al sol. Constantemente había
que acordarse de que eso se iba a acabar pronto, de que teníamos muy poco
tiempo para disfrutarlo, entonces había que aprovechar cada momento, y por eso
la gente se enloquecía.</p>

<p>En junio o julio a veces hace tanto calor que parece que el asfalto se funde.
Realmente, todo se funde. Pero en agosto la llegan los vientos del norte
trayendo las decepciones. La mente todavía no puede aceptar que el verano
se acabó tan rápido, y la mente no manda al cuerpo que tiene que vestirse.
Entonces llegamos al otoño con mocos y tos.</p>

<p>El otoño es un poco incómodo, porque uno no sabe cómo vestirse: de día es
todavía bastante cálido, pero por la mañana hace mucho frío. Muchísimo.
Entonces todos andan muy abrigados con muchas prendas quitándose sus sacos
uno por uno. Después del verano caliente, cinco grados centígrados se siente
como uno estuviera en el Polo norte. Pero ese es el precio que pagamos para
ver esa abundancia de colores: las hojas de los árboles pierden el pigmento
verde y el bosque se convierte en un lugar mágico. Siempre trataba de no
levantar mucho las piernas cuando andaba para hacer crujir las hojas cecas
de los árboles.</p>

<p>Luego, inesperadamente (como cada año), llega la nieve, y es inesperado
porque los servicios de aseo nunca están preparados. De verdad, nadie está
preparado. Creo que es porque todos tienen muy por dentro una pequeña esperanza
de que puede ser éste año el invierno no llegue. Los árboles se vuelven
completamente siniestros y se ven como muertos.</p>

<p><img class="center" src="http://blog.vero4ka.info/images/winter.jpg" title="'Mi colegio (de primaria) en Moscú en invierno'" ></p>

<p>El diciembre el mundo se queda sumido en la oscuridad. Lo más doloroso era
despertarse por la mañana para ir al colegio:</p>

<p>A las siete de la mañana suena el despertador, uno abre los ojos, pero todo
está completamente oscuro, como a la medianoche. Los ojos se cierran lentamente
y te vuelves a terminar de ver el último sueño. Pero luego llega el dolor –
alguien prendió la luz. La luz entra a través de los párpados cerrados, y es
insoportable. Uno trata de entreabrir los ojos, pero el brillo amarillo les ciega,
entonces uno tiene que cerrarlos inmediatamente. Así con los ojos medio abiertos
uno desayuna, se viste y sale de la casa a la oscuridad para patullar por la nieve.
Claro que el barrendero también tuvo pereza y lo había limpiado las calles,
entonces tocaba de nuevo abrir el camino hasta el colegio.</p>

<p><img class="center" src="http://blog.vero4ka.info/images/colegio.jpg" title="'Mi colegio (edificios del primer grado y la secundaria)'" ></p>

<p><img class="center" src="http://blog.vero4ka.info/images/colegio3.jpg" title="'Mi colegio (edificios del primer grado y la secundaria)'" ></p>

<p><img class="center" src="http://blog.vero4ka.info/images/colegio4.jpg" title="'Mi colegio (edificios del primer grado y la secundaria)'" ></p>

<p>Las imágenes tomadas de
<a href="https://ssl.panoramio.com/user/2301915">https://ssl.panoramio.com/user/2301915</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[“Rewire”]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/07/02/rewire/"/>
    <updated>2016-07-02T08:19:37-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/07/02/rewire</id>
    <content type="html"><![CDATA[<p><img class="center" src="http://blog.vero4ka.info/images/rewire.jpg" title="'Rewire'" ></p>

<p>Hace unos meses me di cuenta de que casi no leía noticias de Colombia,
y era bastante difícil empezar a hacerlo, a pesar de que ya vivía aquí por
un tiempo significativo. En Rusia, empezando desde el bachillerato,
me demoré varios años leyendo toda la basura que publicaban en la prensa y
en Internet para al fin formar mi lista de periódicos favoritos y periodistas
que escribían textos interesantes y relativamente objetivos. Mientras que aquí
en Colombia todo era desconocido: los artículos que encontraba al principio
me parecían muy secos, llenos de descripciones de los hechos y casi sin
análisis. No los disfrutaba ni siquiera desde el punto de vista literario y
al final, después de torturarme con varios textos de la revista Semana,
pasaba a mi mundo cómodo y organizado de mis fuentes de noticias rusas
preseleccionadas.</p>

<p>Claro que me demoré tanto en empezar a leer las noticias locales en
parte por la falta de perspectiva: sin conocer los nombres de los políticos y sus pareceres, sin conocer bien la historia y la mentalidad de la gente, es bastante difícil percibir la nueva información que proviene de ese contexto histórico y cultural.</p>

<p>Analizando esa situación, me puse a reflexionar acerca del cosmopolitismo general, y qué tantas noticias recibimos acerca de los otros países. Así, encontré el libro de Ethan Zuckerman, llamado “Rewire”: Cosmopolitas Digitales en la Era de la Conexión.</p>

<p>Ethan Zuckerman es director del MIT Center for Civic Media, blogger y activista de Internet. En su libro él escribe acerca de cómo las redes sociales y las nuevas tecnologías cambian nuestras vidas. Ahora, cuando tanta gente tiene acceso a Internet, parece que estamos rodeados de textos y noticias de todo el mundo, pero en realidad, todas esas herramientas nos ayudan a encontrar lo que buscamos y ya queremos saber, pero no la información que debemos conocer y que sería útil para nosotros.</p>

<p>En estos días, prestamos más la atención a las noticias de nuestro barrio, a lo qué ha pasado con nuestros amigos de Facebook, y no a lo que está pasando al otro lado del océano. Zuckerman escribe: “La vida de nuestros amigos nos interesa más que la vida de algunos desconocidos.” Y eso se refleja en las fuentes de información que usamos desde los periódicos hasta las redes sociales: ellos no nos ayudan a encontrar lo que necesitamos saber, sino lo que queremos saber. Zuckerman hizo un análisis de los periódicos de del pasado, comparando con los de hoy y se dió cuenta de que a pesar de que tenemos televisión satelital e Internet, que nos permiten transmitir la información desde cualquier parte del mundo, nos enfrentamos con una imagen del mundo más limitada que antes. Ahora el problema no está en la disponibilidad de la información, sino en la atención que estamos dispuestos a darla. Y ese problema se ve agravado por nuestro deseo natural de prestar más atención a lo que está pasando en el nuestro entorno y lo que tiene impacto directo sobre nosotros, nuestros amigos y familiares.</p>

<p>Zuckerman dice que debemos empezar a vernos no sólo como a los ciudadanos de un país en particular, sino también como los ciudadanos del mundo. Pero aunque uno de los mayores logros de Internet es la posibilidad de encontrar en la red las cosas más inesperadas, en la práctica lo que encontramos más a menudo, es algo que ya está cerca a nuestra casa. Al leer demasiados artículos de los autores que comparten nuestras opiniones, y al comunicarnos exclusivamente con las personas de ideas afines corremos el riesgo de radicalizarlos.</p>

<p>El proyecto de Ethan Zuckerman Global Voices: <a href="https://es.globalvoices.org/">es.globalvoices.org</a> <br />
El libro Rewire: <a href="https://www.goodreads.com/book/show/16233761-rewire">www.goodreads.com/book/show/16233761-rewire</a></p>

<p><em>Imagen: <a href="https://www.flickr.com/photos/brewbooks/7780990192/in/photolist-cRzBij-K4paU-7UY3HD-9ABvuD-7FKgVs-rShcaP-5WwbN7-ccehiL-9nFnhH-neVHmM-5c5DxS-9nFncg-7iQDGs-7jPhyd-21JVDJ-bxc88V-brP5Hn-neVccP-2SVjky-5WrUBi-rScq2r-qprHWm-5UATws-3pcHxt-kFnpQn-7Bf9z-ngYzuZ-3KWeLU-7LFVGn-poVcLj-neXcse-bGywMv-Km4B5-5j3uR2-rQT3gb-4QQbk8-aD8nhY-7eJRHD-6H8qEM-c69PU-nQ4sdZ-aRnQ9t-4HrqXc-6LBwWq-8Bk663-n232UD-7RFJky-itGLmk-aExg9q-cG5jK">www.flickr.com/photos/brewbooks/</a></em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Somos de una sangre por Roman Super]]></title>
    <link href="http://blog.vero4ka.info/blog/2016/05/29/somos-de-una-sangre-por-roman-super/"/>
    <updated>2016-05-29T14:10:22-05:00</updated>
    <id>http://blog.vero4ka.info/blog/2016/05/29/somos-de-una-sangre-por-roman-super</id>
    <content type="html"><![CDATA[<blockquote><p>Somos de una sangre, tú y yo" - dijo Mowgli...</p><footer><strong>Rudyard Kipling</strong> <cite>El Libro De La Selva</cite></footer></blockquote>


<p><img class="center" src="http://blog.vero4ka.info/images/de_una_sangre.jpg" title="'Somos de una sangre'" ></p>

<p><a href="https://daily.afisha.ru/archive/gorod/people/esli-est-ad-na-zemle-eto-kashirka-roman-super-o-tom-kak-perezhit-rak-zheny/">La entrevista</a>
con Roman Super y la periodista Elena Vanina para
<a href="https://daily.afisha.ru/archive/gorod/people/esli-est-ad-na-zemle-eto-kashirka-roman-super-o-tom-kak-perezhit-rak-zheny/">la revista Afisha</a>.
Traducción a español:</p>

<p><strong><a href="https://www.goodreads.com/book/show/27394679">Tu libro</a> es no es sólo
una historia acerca de cómo tú y tu esposa Yulia vencieron el cáncer.
Es una historia de amor extraordinaria. Linda y asombrosa.</strong></p>

<p>Simplemente, es que yo siempre tuve suerte con las niñas.
Con mi mamá, que alguna vez también fue niña.
Con mis profesoras en el colegio y en la universidad,
quienes también fueron niñas e alguna época.
Y con mi esposa, quien era niña, cuando nos conocimos.</p>

<p><strong>¿Eso pasó hace mucho tiempo?</strong></p>

<p>Sí. Yo estudiaba en el colegio y tenía ganas de ingresar a la universidad y
asistía a los cursos para los postulantes, que daba una estudiante de la facultad de periodismo.
Yulia era amiga de esa muchacha y un día por casualidad entró al salón donde estaba yo.
Así nos conocimos. Después yo la quité a su novio, con quien iba a casarse.
Después yo mismo me volví su novio, luego el esposo, y más tarde el papá de nuestro niño.
Así fue.</p>

<p><strong>Ustedes eran jóvenes, estaban felices y hacía poco habían tenido un hijo.
Ustedes esperaban de la vida cualquier cosa, pero no eso.
Y de repente les cae un diagnóstico horroroso - el cáncer.
¿Recuerdas cómo fue eso?</strong></p>

<p>Me asusté mucho. Empecé a imaginar un funeral, un cementerio.
Empecé a imaginar cómo iba a criar a nuestro hijo solo y trabajar al mismo tiempo.
Por supuesto, en una situación como esa, lo primero que uno debe hacer es llamar
a la persona que pueda decirle qué hacer. En mi caso esa persona era Katya Gordeeva
(una autora la las películas documentales y del libro &ldquo;Superar el cancer&rdquo;),
quien es una experta en la materia. Nosotros hablamos,
y Katya me hizo aclarar mis pensamientos. Y eso ayudó.
Tú estás nervioso, preocupado, temes a todo. Y todos tus temores te distraen
de las cosas en las cuales tienes que concentrarte. Y tú tienes que entender,
que toda tu vida posterior va a convertirse en un trabajo poco agradable,
que va a sacar muchas fuerzas de ti. Tendrás que tranquilizarte constantemente.</p>

<p><strong>El miedo. En Rusia, perece, que para todos es un sinónimo de cáncer.
Una vez estaba caminando en Berlin y hacía mi corría un grupo de personas
enfermas con unas camisetas de colores vivos con la frase &ldquo;Vencemos el cáncer.&rdquo;
Ellos sonreían. Los vi y en ese momento de la forma automática miré al
otro lado: no-no, por supuesto, no tengo miedo, simplemente al otro lado
de la calle hay una cosa muy bonita. Se impone una sensación, de que esconderse
es un reflejo universal.</strong></p>

<p>Es un problema muy grande. Mi suegro es una persona muy enferma, y ante los ojos
de él su hija se enfermó, estaba en el hospital y se curó,
pero no sé qué tendría que pasar para que él vaya al hospital.
No importa si es por alguna cosa pequeña o por algo grave.
No sé cómo explicarlo de una forma racional. Y hay muchos ejemplos de ese estilo.
Pero todo debería ser diferente: te asustaste, entonces corre al doctor.
Probablemente, la gente que tiene recursos, debe difundir esa idea.
Yo escribía mi libro y pensaba, que era posible que en el futuro se pueda tomarlo como un manual.
Cuando viene una desgracia, tú no sabes qué hacer, a dónde ir, en qué pensar.
Es muy fácil volverse loco. Yo quería escribir acerca de eso.
¿Mi libro o el libro de Katya Gordeeva son capaces de cambiar algo al nivel estructural?
No lo creo. Pero si incluso mil de personas miran el problema de otra forma, será un éxito.</p>

<p><strong>Cuando yo vi a mis conocidos, cuyas parejas tenían cáncer, a veces me parecía
que la persona enferma se mantenía más firme comparando con sus familiares.
¿Es así en realidad?</strong></p>

<p>Sí, es verdad. Lo primero que uno quiere hacer es desanimarse, estancarse
y escapar del problema. Pero así llegaría el fin. Nada resultaría.
Yo vi cómo Yulia estaba bajo los cuentagotas, que la quemaban desde adentro,
la afectaban mucho físicamente. Durante esos seis sesiones de quimioterapia
ella se quejó o dio rienda suelta a sus emociones sólo una vez y media o dos veces.
Yo lo hacía con más frecuencia.</p>

<p><strong>¿Tu hijo fue alguna vez al hospital donde estaba tu esposa?</strong></p>

<p>Por supuesto que no. Yo vi unos niños por allá, pero me parece que no
es lugar para ellos. Luka era demasiado pequeño para explicarle que es oncología.
Él entendía, que la mamá estaba enferma, que en algún momento se volvió clava.
Pero tratábamos de volverlo una broma: &ldquo;ay, la mamá de volvió calva.
La mamá se enfermó y luego se recuperó.&rdquo;</p>

<p><strong>¿Era difícil quedarte solo con el hijo?</strong></p>

<p>El tratamiento de Yulia cayó en los meses de verano, entonces la gran parte
del tiempo Luka estaba en la dacha con sus abuelos. En este aspecto
tuvimos suerte. Por otro lado, yo ya tenía experiencia en estar con mi hijo
sin la mamá. Un tiempo antes la mamá de Yulia también tuvo cáncer.
Así somos de &ldquo;suertudos&rdquo;. Yulia era como la enfermera de su mamá,
y yo estaba con Luka. Entonces me acostumbré. Lo más difícil era actuar
frente el niño como si no hubiera pasado nada grave. Con la mitad de
tu cerebro tienes que pensar en los helados, la plazoleta de juegos,
diversiones y los dibujos animados. Y con la otra - que la mamá de este
niño cayó en desgracia. No es fácil, pero es lo que pone las cosas en su lugar.
Tú revaluaslas prioridades en tu vida. Después de que Yulia se enfermó,
no hemos peleado. Ni una sola vez. Y Luka resultó la fuente principal de
las fuerzas para nosotros. Nos dimos cuanta de que nos gustaría un día estar
en la fiesta de su matrimonio juntos, que queremos ayudarle a escapar
el servicio militar, que queremos mostrarle las películas que nos gustan
y recomendarle libros&hellip;</p>

<p><strong>¿Qué fue lo más difícil durante el tratamiento?</strong></p>

<p>Lo más duro empezó un año después del tratamiento. La radioterapia es como
un pequeño Chernobyl para una persona. Pasa un tiempo, y te empiezan a alcanzar
los efectos secundarios, de los cuales no te habían advertido. Se daña la tiroides,
dejas de poder controlar tu peso, no comes nada, pero igual te engordas,
o de repente te despiertas por la noche con la taquicardia, que normalmente
no le da a una persona. Y eso asusta mucho. Porque pensabas que ya te curaste,
que empezó una vida nueva, que todo lo malo ha quedado atrás.
Y de repente tienes esa tensión como el de un caballo.
El tratamiento del cáncer también incluye un periodo de la rehabilitación,
el cual en Rusia nadie se encarga. Te hemos curado el tumor y adiós.
Que pena. Y cómo vas a seguir viviendo es tu problema.</p>

<p><strong>Al mirar ese camino que ustedes han pasado juntos, ¿se puede decir que te enseño algo?</strong></p>

<p>La cuestión principal, como me parece, que tienes que preguntarte en
una situación así no es ¿por qué? Es ¿para qué?  Porque para la pregunta
¿por qué? no hay respuesta. Y sobre la pregunta ¿para qué? vale la pena reflexionar.
Acerca de eso escribí en mi libro. Después de la enfermedad trato de pasar
cada segundo libre con mi familia, simplemente siempre queremos estar juntos.
Antes no era así. Ésta visa es muy correcta. Ella da origen a muchos sensaciones
agradables, de las cuales nos estamos privando. Puede ser que para eso.</p>

<p><img class="center" src="http://blog.vero4ka.info/images/super_book.jpg" title="'Roman Super'" ></p>

<p>El libro de Roman Super en Bookmate:
<a href="https://bookmate.com/books/IRInDaCY">https://bookmate.com/books/IRInDaCY</a></p>
]]></content>
  </entry>
  
</feed>
