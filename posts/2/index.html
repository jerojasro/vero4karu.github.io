
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cansada de ser feliz</title>
  <meta name="author" content="vero4ka">

  
  <meta name="description" content="Somos de una sangre, tú y yo" - dijo Mowgli...Rudyard Kipling El Libro De La Selva La entrevista
con Roman Super y la periodista Elena Vanina para
la &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.vero4ka.info/posts/2/">

  <link href="/favicon.ico" rel="icon">

  <!--Fonts from Google's Web font directory -->
  <link href="https://fonts.googleapis.com/css?family=Cherry+Swash" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Cansada de ser feliz" type="application/atom+xml">

  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43471959-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Cansada de ser feliz</a></h1>
  
    <h2>Bienvenidos a mi flujo de conciencia</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="blog.vero4ka.info">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/comments">Contacts</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/29/somos-de-una-sangre-por-roman-super/">Somos de una sangre por Roman Super</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-29T14:10:22-05:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:10 pm</span></time>
        
           | <a href="/blog/2016/05/29/somos-de-una-sangre-por-roman-super/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2016/05/29/somos-de-una-sangre-por-roman-super/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Somos de una sangre, tú y yo" - dijo Mowgli...</p><footer><strong>Rudyard Kipling</strong> <cite>El Libro De La Selva</cite></footer></blockquote>


<p><img class="center" src="/images/de_una_sangre.jpg" title="'Somos de una sangre'" ></p>

<p><a href="https://daily.afisha.ru/archive/gorod/people/esli-est-ad-na-zemle-eto-kashirka-roman-super-o-tom-kak-perezhit-rak-zheny/">La entrevista</a>
con Roman Super y la periodista Elena Vanina para
<a href="https://daily.afisha.ru/archive/gorod/people/esli-est-ad-na-zemle-eto-kashirka-roman-super-o-tom-kak-perezhit-rak-zheny/">la revista Afisha</a>.
Traducción a español:</p>

<p><strong><a href="https://www.goodreads.com/book/show/27394679">Tu libro</a> es no es sólo
una historia acerca de cómo tú y tu esposa Yulia vencieron el cáncer.
Es una historia de amor extraordinaria. Linda y asombrosa.</strong></p>

<p>Simplemente, es que yo siempre tuve suerte con las niñas.
Con mi mamá, que alguna vez también fue niña.
Con mis profesoras en el colegio y en la universidad,
quienes también fueron niñas e alguna época.
Y con mi esposa, quien era niña, cuando nos conocimos.</p>

<p><strong>¿Eso pasó hace mucho tiempo?</strong></p>

<p>Sí. Yo estudiaba en el colegio y tenía ganas de ingresar a la universidad y
asistía a los cursos para los postulantes, que daba una estudiante de la facultad de periodismo.
Yulia era amiga de esa muchacha y un día por casualidad entró al salón donde estaba yo.
Así nos conocimos. Después yo la quité a su novio, con quien iba a casarse.
Después yo mismo me volví su novio, luego el esposo, y más tarde el papá de nuestro niño.
Así fue.</p>

<p><strong>Ustedes eran jóvenes, estaban felices y hacía poco habían tenido un hijo.
Ustedes esperaban de la vida cualquier cosa, pero no eso.
Y de repente les cae un diagnóstico horroroso - el cáncer.
¿Recuerdas cómo fue eso?</strong></p>

<p>Me asusté mucho. Empecé a imaginar un funeral, un cementerio.
Empecé a imaginar cómo iba a criar a nuestro hijo solo y trabajar al mismo tiempo.
Por supuesto, en una situación como esa, lo primero que uno debe hacer es llamar
a la persona que pueda decirle qué hacer. En mi caso esa persona era Katya Gordeeva
(una autora la las películas documentales y del libro &ldquo;Superar el cancer&rdquo;),
quien es una experta en la materia. Nosotros hablamos,
y Katya me hizo aclarar mis pensamientos. Y eso ayudó.
Tú estás nervioso, preocupado, temes a todo. Y todos tus temores te distraen
de las cosas en las cuales tienes que concentrarte. Y tú tienes que entender,
que toda tu vida posterior va a convertirse en un trabajo poco agradable,
que va a sacar muchas fuerzas de ti. Tendrás que tranquilizarte constantemente.</p>

<p><strong>El miedo. En Rusia, perece, que para todos es un sinónimo de cáncer.
Una vez estaba caminando en Berlin y hacía mi corría un grupo de personas
enfermas con unas camisetas de colores vivos con la frase &ldquo;Vencemos el cáncer.&rdquo;
Ellos sonreían. Los vi y en ese momento de la forma automática miré al
otro lado: no-no, por supuesto, no tengo miedo, simplemente al otro lado
de la calle hay una cosa muy bonita. Se impone una sensación, de que esconderse
es un reflejo universal.</strong></p>

<p>Es un problema muy grande. Mi suegro es una persona muy enferma, y ante los ojos
de él su hija se enfermó, estaba en el hospital y se curó,
pero no sé qué tendría que pasar para que él vaya al hospital.
No importa si es por alguna cosa pequeña o por algo grave.
No sé cómo explicarlo de una forma racional. Y hay muchos ejemplos de ese estilo.
Pero todo debería ser diferente: te asustaste, entonces corre al doctor.
Probablemente, la gente que tiene recursos, debe difundir esa idea.
Yo escribía mi libro y pensaba, que era posible que en el futuro se pueda tomarlo como un manual.
Cuando viene una desgracia, tú no sabes qué hacer, a dónde ir, en qué pensar.
Es muy fácil volverse loco. Yo quería escribir acerca de eso.
¿Mi libro o el libro de Katya Gordeeva son capaces de cambiar algo al nivel estructural?
No lo creo. Pero si incluso mil de personas miran el problema de otra forma, será un éxito.</p>

<p><strong>Cuando yo vi a mis conocidos, cuyas parejas tenían cáncer, a veces me parecía
que la persona enferma se mantenía más firme comparando con sus familiares.
¿Es así en realidad?</strong></p>

<p>Sí, es verdad. Lo primero que uno quiere hacer es desanimarse, estancarse
y escapar del problema. Pero así llegaría el fin. Nada resultaría.
Yo vi cómo Yulia estaba bajo los cuentagotas, que la quemaban desde adentro,
la afectaban mucho físicamente. Durante esos seis sesiones de quimioterapia
ella se quejó o dio rienda suelta a sus emociones sólo una vez y media o dos veces.
Yo lo hacía con más frecuencia.</p>

<p><strong>¿Tu hijo fue alguna vez al hospital donde estaba tu esposa?</strong></p>

<p>Por supuesto que no. Yo vi unos niños por allá, pero me parece que no
es lugar para ellos. Luka era demasiado pequeño para explicarle que es oncología.
Él entendía, que la mamá estaba enferma, que en algún momento se volvió clava.
Pero tratábamos de volverlo una broma: &ldquo;ay, la mamá de volvió calva.
La mamá se enfermó y luego se recuperó.&rdquo;</p>

<p><strong>¿Era difícil quedarte solo con el hijo?</strong></p>

<p>El tratamiento de Yulia cayó en los meses de verano, entonces la gran parte
del tiempo Luka estaba en la dacha con sus abuelos. En este aspecto
tuvimos suerte. Por otro lado, yo ya tenía experiencia en estar con mi hijo
sin la mamá. Un tiempo antes la mamá de Yulia también tuvo cáncer.
Así somos de &ldquo;suertudos&rdquo;. Yulia era como la enfermera de su mamá,
y yo estaba con Luka. Entonces me acostumbré. Lo más difícil era actuar
frente el niño como si no hubiera pasado nada grave. Con la mitad de
tu cerebro tienes que pensar en los helados, la plazoleta de juegos,
diversiones y los dibujos animados. Y con la otra - que la mamá de este
niño cayó en desgracia. No es fácil, pero es lo que pone las cosas en su lugar.
Tú revaluaslas prioridades en tu vida. Después de que Yulia se enfermó,
no hemos peleado. Ni una sola vez. Y Luka resultó la fuente principal de
las fuerzas para nosotros. Nos dimos cuanta de que nos gustaría un día estar
en la fiesta de su matrimonio juntos, que queremos ayudarle a escapar
el servicio militar, que queremos mostrarle las películas que nos gustan
y recomendarle libros&hellip;</p>

<p><strong>¿Qué fue lo más difícil durante el tratamiento?</strong></p>

<p>Lo más duro empezó un año después del tratamiento. La radioterapia es como
un pequeño Chernobyl para una persona. Pasa un tiempo, y te empiezan a alcanzar
los efectos secundarios, de los cuales no te habían advertido. Se daña la tiroides,
dejas de poder controlar tu peso, no comes nada, pero igual te engordas,
o de repente te despiertas por la noche con la taquicardia, que normalmente
no le da a una persona. Y eso asusta mucho. Porque pensabas que ya te curaste,
que empezó una vida nueva, que todo lo malo ha quedado atrás.
Y de repente tienes esa tensión como el de un caballo.
El tratamiento del cáncer también incluye un periodo de la rehabilitación,
el cual en Rusia nadie se encarga. Te hemos curado el tumor y adiós.
Que pena. Y cómo vas a seguir viviendo es tu problema.</p>

<p><strong>Al mirar ese camino que ustedes han pasado juntos, ¿se puede decir que te enseño algo?</strong></p>

<p>La cuestión principal, como me parece, que tienes que preguntarte en
una situación así no es ¿por qué? Es ¿para qué?  Porque para la pregunta
¿por qué? no hay respuesta. Y sobre la pregunta ¿para qué? vale la pena reflexionar.
Acerca de eso escribí en mi libro. Después de la enfermedad trato de pasar
cada segundo libre con mi familia, simplemente siempre queremos estar juntos.
Antes no era así. Ésta visa es muy correcta. Ella da origen a muchos sensaciones
agradables, de las cuales nos estamos privando. Puede ser que para eso.</p>

<p><img class="center" src="/images/super_book.jpg" title="'Roman Super'" ></p>

<p>El libro de Roman Super en Bookmate:
<a href="https://bookmate.com/books/IRInDaCY">https://bookmate.com/books/IRInDaCY</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/26/como-obtener-el-nombre-del-dia-de-la-semana-en-python/">Cómo obtener el nombre del día de la semana en Python</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-26T09:02:36-05:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:02 am</span></time>
        
           | <a href="/blog/2016/05/26/como-obtener-el-nombre-del-dia-de-la-semana-en-python/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2016/05/26/como-obtener-el-nombre-del-dia-de-la-semana-en-python/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="kn">import</span> <span class="nn">calendar</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Monday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Tuesday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Wednesday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Thursday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Friday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Saturday&#39;</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Sunday&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Si para nosotros la semana empieza el Domindo, podemos escribirlo de la siguiente forma:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="n">sunday</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="n">sunday</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">%</span> <span class="mi">7</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Sunday&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="n">tuesday</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">calendar</span><span class="o">.</span><span class="n">day_name</span><span class="p">[</span><span class="n">tuesday</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">%</span> <span class="mi">7</span><span class="p">]</span>
</span><span class='line'><span class="s">&#39;Tuesday&#39;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/04/sql-to-sqlalquemy-conversions/">SQL to SQLAlquemy conversions</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-04T21:15:39-05:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:15 pm</span></time>
        
           | <a href="/blog/2016/05/04/sql-to-sqlalquemy-conversions/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2016/05/04/sql-to-sqlalquemy-conversions/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Some examples on how to convert raw SQL to SQLAlchemy query:</p>

<h3>Select all</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span><span class="p">,</span> <span class="n">func</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">())</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Add labels</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">requiests</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s">&#39;requests&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">row</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">row</span><span class="o">.</span><span class="n">requests</span>
</span><span class='line'><span class="mi">12</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Sum</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">status</span><span class="p">)</span> <span class="k">as</span> <span class="n">rides</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">status</span><span class="p">)</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s">&#39;books&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">row</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">row</span><span class="o">.</span><span class="n">books</span>
</span><span class='line'><span class="mi">12</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Return a count of rows and distinct</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="p">(</span><span class="n">author_id</span><span class="p">))</span> <span class="k">as</span> <span class="n">authors</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">distinct</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span class='line'>    <span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">author_id</span><span class="p">))</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s">&#39;authors&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Query a date range</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">b</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">created_at</span> <span class="o">&gt;</span> <span class="k">current_timestamp</span> <span class="o">-</span> <span class="p">(</span><span class="k">current_timestamp</span> <span class="o">-</span> <span class="nb">interval</span> <span class="s1">&#39;5 hours&#39;</span><span class="p">)::</span><span class="n">time</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Book</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">now</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Conditional sum</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(((</span><span class="n">status</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">))::</span><span class="nb">int</span><span class="p">))</span> <span class="k">as</span> <span class="n">books</span> <span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="kn">from</span> <span class="nn">sqlalchemy.sql.expression</span> <span class="kn">import</span> <span class="n">case</span>
</span><span class='line'><span class="o">&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span class='line'>    <span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">case</span><span class="p">([(</span><span class="n">Book</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">in_</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">else_</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s">&#39;books&#39;</span><span class="p">),</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>In</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;</span> <span class="n">Book</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">in_</span><span class="p">((</span>
</span><span class='line'>        <span class="n">BOOK_CONFIRMED</span><span class="p">,</span>
</span><span class='line'>        <span class="n">BOOK_FINISHED</span><span class="p">,</span>
</span><span class='line'>    <span class="p">)),</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other examples</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</span><span class='line'><span class="n">six_months_ago</span> <span class="o">=</span> <span class="n">today</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">books</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span class='line'>    <span class="n">func</span><span class="o">.</span><span class="n">to_char</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span> <span class="s">&#39;MM&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">.</span><span class="n">author_id</span> <span class="o">==</span> <span class="n">author</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>  <span class="c"># Filter books by author</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">six_months_ago_min</span><span class="p">,</span> <span class="n">today_max</span><span class="p">)</span>  <span class="c"># Get all books created in last six months</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span>
</span><span class='line'>    <span class="n">func</span><span class="o">.</span><span class="n">to_char</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span> <span class="s">&#39;MM&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">to_char</span><span class="p">(</span><span class="n">Book</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span> <span class="s">&#39;MM&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/03/23/hipsters-en-rusia/">Hipsters en Rusia</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-23T13:00:35-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>1:00 pm</span></time>
        
           | <a href="/blog/2016/03/23/hipsters-en-rusia/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2016/03/23/hipsters-en-rusia/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Los hipsters aparecieron en los EEUU en los años 40.
El nombre viene de la expresión “to be hip” que significa estar al día.
Originalmente eso denotaba a un representante de una subcultura,
que se formó entre los admiradores de la musica jazz,
pero hoy en día son los jóvenes acomodados habitantes de la ciudad,
a quienes les interesa la cultura y el arte elitista, la moda,
la música alternativa, el indi-rock, el cine independiente y
la literatura contemporánea.
¿Pero por qué ahora a esos dandies frívolos les llaman la amenaza al régimen de Putin?</p>

<p>En Rusia los hipsters pronto se convertieron de ser personas,
que ciegamente seguían la moda, en gente que ahora llamamos “la clase creativa” –
la intelectualidad burguesa liberal, que no resultó tan apolítica, como parecía al principio.</p>

<p>Es cierto, que al principio ellos asperaban sólo al mejoramiento de su estatus material, pero después, en consecuencia, cada uno comprando un Moleskine, un portátil y una posibilidad de sentarse en algún lugar con wifi, empezaron a reflexionar y pedir algo más que simplemente un consumo material. Se dieron cuenta de que la sociedad no estaba completamente bien, y eso les despertó el sentido de protesta y el deseo de cambios.</p>

<p>…Todo empezó en 2004 cuando se puso de moda vestirse con unas camisetas,
unos vestidos, unos tenis y unas chaquetas envejecidos, junto con una cámara análoga,
que los hipsters acaparaban por unos centavos en los mercados de pulgas. El mismo año
en Moscú tuvo lugar un “verano de tolerancia” con conciertos de las bandas Moloko
y Scissor Sisters, con la idea de que la música gay disco es para los heterosexuales también.</p>

<p>En 2005 una revista llamada Afisha (La Cartelera) organiza el primer “picnic”:
durante un día en un parque grande en Moscú hay música, frisbee, hamacas, perros calientes
y – no van a creer – sin alcohol…</p>

<p>La ignorancia informatica definitivamente deja de ser <em>comme il faut</em>.
El publico que comúnmente no mira televisión, ahora descubre que las serias pueden
ser distintas y empieza a bajar los torrents con capítulos de Dr House.
Se abren muchos clubs para los nuevos melómanos, donde ponen la música indie,
electrónica, post-metal. La banda escocesa Franz Ferdinand da su primer
concierto en el club B2. Se abre una tienda del diseñador Denis Simachev y
el canal de televisión 2×2,que muestra los dibujos animados
(estilo South Park y los Simpsons) 24 horas al día par los kidults
(abreviación de kid – niño, y adult – adulto). En paralelo se abre la revista
electrónica Look at me, que se vuelve de culto muy rápido.
La primera versión de la revista se veía como un blog con las fotos de “looks”
que subían los usuarios, mostrando que alguien puede verse bien sin necesidad
de comprar ropa cara o de marcas famosas. Después esa revista se volvió un
portal dedicado a las noticias sobre moda, arte y cine. También en esa época
se abrieron las galerías de arte moderno Vinzavod y Garazh, y a Moscú llegó
la exposición de la cultura “skeaker” Faces &amp; Laces.</p>

<p><img class="center" src="/images/park_gorky.jpg" title="Parque Gorky" alt="Parque Gorky"></p>

<p>Al mismo tiempo la autoenseñanza y el concepto de edutainment
(educación + diversión) se pusieron de moda y se abrió una página llamada
Teorías y Prácticas. Este proyecto unió a las personas que querían aprender
y compartir conocimiento, y divulga la información acerca de las conferencias
publicas que tienen lugar en los bares, clubs, cafés,  galerías,
salas de conferencias y parques de Moscú y San Petersburgo.</p>

<p><img class="center" src="/images/public_lectures.jpg" title="'Conferencias públicas'" ></p>

<p>Desde ese momento en su tiempo libre los hipsters iban a escuchar los
discursos acerca de microbiología, física, historia, lingüística y arte.
Los libros de divulgación científica empezaron a venderse en ediciones numerosas,
y los nombres de los científicos se volvieron conocidos.</p>

<p>En 2010 se abrió un instituto de arquitectura llamado Strelka y la urbanística
invadió las mentes de los moscovitas jóvenes, tanto que todos
los que deseaban escuchar los discursos públicos no cabían en las salas del instituto.</p>

<p>En ese periodo los hipsters (la clase creativa) obtienen su nueva ideología
de “las acciones pequeñas”. La idea es que hay que asumir una tarea pequeña,
por ejemplo, no te qyejes con los servicios públicos, sino siembre un árbol frente a tu casa.</p>

<p>Los hipsters ya no son vistos como unos perezosos, y las fundaciones benéficas
y los grupos de iniciativa crecen como hongos después de la lluvia.
En 2011 Moscú recibe su nuevo ministro de cultura – Sergey Kapkov –
que transforma completamente los espacios públicos. La culminación de
su actividad fue el acondicionamiento del parque soviético de Gorky,
que se convirtió en un espacio agradable con teatros al aire libre, festivales,
bibliotecas, zonas verdes con wifi, discursos gratuitos, riberas con sillas
reclinables de madera – una reserva para hipsters. En Rusia aparece un canal
de televisión de nuevo formato – para la gente que desprecia la televisión,
y en 2012 empieza la ola de protestas contra el poder actual.
El mismo año el gobierno abre un proceso contra las muchachas de Pussy Riot.
Todas las protestas fueron reprimidas con crueldad. El cenado sale con una ley
que prohibe la propaganda de homosexualismo, y el gobierno se vuelve mucho
más represivo con la clase creativa, excluye el canal liberal del paquete
de televisión por cable y cierra algunos de los clubs preferidos por los hipsters.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/30/pruebas-para-formularios-en-django/">Pruebas para formularios en Django</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-30T04:49:19-05:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:49 am</span></time>
        
           | <a href="/blog/2015/09/30/pruebas-para-formularios-en-django/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/09/30/pruebas-para-formularios-en-django/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>En esta entrada de blog quiero compartir la forma en la que escribo ruebas para formularios en un proyecto de Django.</p>

<p>Primero vamos a instalar los paquetes necesarios:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ pip install django-webtest
</span><span class='line'>$ pip install factory-boy</span></code></pre></td></tr></table></div></figure>


<p><a href="http://webtest.pythonpaste.org/en/latest/WebTest">WebTest</a> es una biblioteca que nos ayuda a escribir pruebas para las aplicaciones wsgi. Es mucho más poderosa comparando con <code>django.test.Client</code> que viene con Django.</p>

<p>En el archivo de configuración especificamos que vamos a usar la base de datos SQLite para correr nuestras pruebas:</p>

<figure class='code'><figcaption><span>test_settings.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Suponemos que queremos escribir una prueba unitaria para una vista que crea un objeto del modelo <code>Event</code>:</p>

<figure class='code'><figcaption><span>models.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span class='line'>    <span class="n">start_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>
</span><span class='line'>    <span class="n">end_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">people</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s">&#39;history.Person&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;events&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Aquí está la vista que maneja el formulario para crear un evento:</p>

<figure class='code'><figcaption><span>views.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">EventCreateView</span><span class="p">(</span><span class="n">LoginRequiredMixin</span><span class="p">,</span> <span class="n">CreateView</span><span class="p">):</span>
</span><span class='line'>    <span class="n">model</span> <span class="o">=</span> <span class="n">Event</span>
</span><span class='line'>    <span class="n">form_class</span> <span class="o">=</span> <span class="n">EventForm</span>
</span><span class='line'>    <span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s">&#39;history:timeline&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora escribimos nuestra prueba. Vamos a extender la clase <code>django_webtest.WebTest</code>, que en su lugar extiende <code>django.test.TestCase</code> de Django, y crear a un usuario:</p>

<figure class='code'><figcaption><span>tests.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django_webtest</span> <span class="kn">import</span> <span class="n">WebTest</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">HistoryViewsTests</span><span class="p">(</span><span class="n">WebTest</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">superuser</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_superuser</span><span class="p">(</span>
</span><span class='line'>            <span class="n">email</span><span class="o">=</span><span class="s">&#39;superuser@example.com&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="n">username</span><span class="o">=</span><span class="s">&#39;superuser&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="n">password</span><span class="o">=</span><span class="s">&#39;secret&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>        <span class="nb">super</span><span class="p">(</span><span class="n">HistoryViewsTests</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">test_create_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># código para nuestra prueba</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora podemos probar que cuando un usuario trata de acceder nuestra página, se redirige al formulario de acceso (el códigos de estado HTTP es 302):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;history:event_create&#39;</span><span class="p">)</span>
</span><span class='line'><span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">302</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora vamos a acceder la vista como superusuario:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">superuser</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Como tenemos solo un formulario en la página, podemos obtenerlo por una de tres formas: por el atributo <code>.form</code>: <code>response.form</code>, por índice <code>response.forms[0]</code> o por <code>id</code> del formulario (artibuto HTML)<code>response.forms['event_form']</code>.</p>

<p>Para facilitar la depuración de nuestras pruebas, podemos pedir a mostrar el <code>response</code> en navegador predeterminado:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">response</span><span class="o">.</span><span class="n">showbrowser</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora podemos diligenciar nuestro formulario con los datos de prueba:</p>

<figure class='code'><figcaption><span>tests.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">HistoryViewsTests</span><span class="p">(</span><span class="n">WebTest</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">test_create_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">person1</span><span class="p">,</span> <span class="n">person2</span><span class="p">,</span> <span class="n">person3</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">create_batch</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">superuser</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">form</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">forms</span><span class="p">[</span><span class="s">&#39;event_form&#39;</span><span class="p">]</span>
</span><span class='line'>        <span class="n">form</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;Título del evento&#39;</span>
</span><span class='line'>        <span class="n">form</span><span class="p">[</span><span class="s">&#39;start_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'>        <span class="n">form</span><span class="p">[</span><span class="s">&#39;people&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">person1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">person2</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span class='line'>        <span class="n">form</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span><span class="o">.</span><span class="n">follow</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="s">u&#39;Título del evento&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">people</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">people</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">person1</span><span class="p">,</span> <span class="n">people</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">person2</span><span class="p">,</span> <span class="n">people</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="n">person3</span><span class="p">,</span> <span class="n">people</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Para generar objetos del modelo <code>Person</code> usamos la biblioteca <a href="http://factoryboy.readthedocs.org/">Factory Boy</a>:</p>

<figure class='code'><figcaption><span>factories.py </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">..models</span> <span class="kn">import</span> <span class="n">Person</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">factory</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">factory.fuzzy</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">factory</span><span class="o">.</span><span class="n">django</span><span class="o">.</span><span class="n">DjangoModelFactory</span><span class="p">):</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">fuzzy</span><span class="o">.</span><span class="n">FuzzyText</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">model</span> <span class="o">=</span> <span class="n">Person</span>
</span></code></pre></td></tr></table></div></figure>


<p>Así podemos acceder los opciones de una selección o selección múltiple:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='pycon'><span class='line'><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">form</span><span class="p">[</span><span class="s">&#39;people&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">options</span>
</span><span class='line'><span class="go">[(u&#39;1&#39;, False, u&#39;GLUZLvZfyjdZEmjNtnAJvsIVljodQjZpzLRDKrqJtYGiDLmSrN&#39;), (u&#39;2&#39;, False, u&#39;vOxDBbmLaUXxJkJzcqYgLQpBieSoLtXJcpHCEPUpYUIzybhsAh&#39;), (u&#39;3&#39;, False, u&#39;tfXSXCTIQICDwVPYvxZGSXgclFTnHbeYSQaMntxJNcgUJjzAwX&#39;)]</span>
</span><span class='line'><span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="p">[</span><span class="s">&#39;people&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">person1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">person2</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span class='line'><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">form</span><span class="p">[</span><span class="s">&#39;people&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
</span><span class='line'><span class="go">[u&#39;1&#39;, u&#39;2&#39;]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ahora corremos nuestras pruebas y voilà:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ./manage.py test
</span><span class='line'>Creating test database for alias 'default'...
</span><span class='line'>..
</span><span class='line'>----------------------------------------------------------------------
</span><span class='line'>Ran 1 test in 0.463s
</span><span class='line'>
</span><span class='line'>OK
</span><span class='line'>Destroying test database for alias 'default'...</span></code></pre></td></tr></table></div></figure>


<p>Enlaces:</p>

<ul>
<li><a href="https://github.com/django-webtest/django-webtest">WebTest</a></li>
<li><a href="http://webtest.pythonpaste.org/en/latest/forms.html">Manejo de formularios con WebTest</a></li>
<li><a href="http://factoryboy.readthedocs.org/">Factory Boy</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/29/como-configurar-pycharm-para-compilar-los-archivos-sass/">Cómo configurar PyCharm para compilar los archivos SASS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-29T03:10:03-05:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:10 am</span></time>
        
           | <a href="/blog/2015/06/29/como-configurar-pycharm-para-compilar-los-archivos-sass/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/06/29/como-configurar-pycharm-para-compilar-los-archivos-sass/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Suponemos que tenemos un proyecto con las siguientes carpetas:</p>

<pre><code>app/
   static/
        css/
        sass/
            main.sass
            home.sass
            variables.sass
</code></pre>

<p>y queremos que cada vez cuando editemos alguno de los archivos <code>.sass</code>, PyCharm lo compile y ponga en la carpeta <code>app/static/css/</code>:</p>

<pre><code>app/
   static/
        css/
            main.css
            home.css
        sass/
            main.sass
            home.sass
            variables.sass
</code></pre>

<p>Para esto debemos ir a <code>File -&gt; Settings -&gt; File Watchers</code> y agregar un nuevo watcher, escogiendo la opción <code>SASS</code></p>

<p><img src="/images/pycharm_file_watchers.png"></p>

<p>y editar las configuraciones:</p>

<p><img src="/images/pycharm_file_watchers_settings.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/01/how-to-raise-a-form-invalid-event-inside-form-valid-method-of-a-formview/">How to raise a form invalid event inside form_valid method of a FormView</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-01T19:35:52-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:35 pm</span></time>
        
           | <a href="/blog/2015/03/01/how-to-raise-a-form-invalid-event-inside-form-valid-method-of-a-formview/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/03/01/how-to-raise-a-form-invalid-event-inside-form-valid-method-of-a-formview/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>How to raise form invalid inside <code>form_valid</code> method of a <code>FormView</code> (<code>CreateView</code>/<code>UpdateView</code>) and add an error message to <code>non_field_errors</code>:</p>

<div><script src='https://gist.github.com/3b62a13bdce7fe4178ac.js'></script>
<noscript><pre><code>from django.forms.util import ErrorList
from django import forms

class ContractUpdateView(UpdateView):
    model = Contract
    template_name = &#39;contract/contract_form.html&#39;
    form_class = ContractForm

    def form_valid(self, form):
        if self.request.POST.get(&#39;finish&#39;):
            if (
                not form.cleaned_data[&#39;number&#39;] or
                not self.object.images.count()
            ):
                form._errors[forms.forms.NON_FIELD_ERRORS] = ErrorList([
                    u&#39;You have to add images and a contract number&#39;
                ])
                return self.form_invalid(form)
            self.object.is_submitted = True
        self.object = form.save()
        return HttpResponseRedirect(self.get_success_url())</code></pre></noscript></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/01/how-to-show-a-booleanfield-of-a-modelform-as-radio-select-yes-slash-no-in-django/">How to show a BooleanField of a ModelForm as radio select (yes/no) in Django</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-01T19:26:52-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:26 pm</span></time>
        
           | <a href="/blog/2015/03/01/how-to-show-a-booleanfield-of-a-modelform-as-radio-select-yes-slash-no-in-django/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/03/01/how-to-show-a-booleanfield-of-a-modelform-as-radio-select-yes-slash-no-in-django/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&rsquo;s suppose that we have a field <code>is_active</code> in our model. It is a boolean field, but in a template we want to show it as a radio select.</p>

<p>In this case we just need to add <code>choices</code> attribute for the model field and then change a widget of the corresponding form:</p>

<figure class='code'><figcaption><span>forms.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
</span><span class='line'>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class='line'>        <span class="n">model</span> <span class="o">=</span> <span class="n">MyModel</span>
</span><span class='line'>        <span class="n">widgets</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="s">&#39;is_active&#39;</span><span class="p">:</span> <span class="n">forms</span><span class="o">.</span><span class="n">RadioSelect</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>forms.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">STATE_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
</span><span class='line'>        <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="s">u&#39;Yes&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="s">u&#39;No&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>    <span class="n">is_active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
</span><span class='line'>        <span class="n">verbose_name</span><span class="o">=</span><span class="s">u&#39;Is it active?&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>        <span class="n">choices</span><span class="o">=</span><span class="n">STATE_CHOICES</span><span class="p">,</span>
</span><span class='line'>    <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>UPDATE:</p>

<p>For Django forms.</p>

<figure class='code'><figcaption><span>forms.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
</span><span class='line'>    <span class="n">is_active</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">TypedChoiceField</span><span class="p">(</span>
</span><span class='line'>        <span class="nb">coerce</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
</span><span class='line'>        <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;No&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Yes&#39;</span><span class="p">)),</span>
</span><span class='line'>        <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">RadioSelect</span>
</span><span class='line'>    <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/01/how-to-send-request-to-ajax-view-in-django-tests/">How to send request to AJAX view in Django tests</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-01T19:23:37-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:23 pm</span></time>
        
           | <a href="/blog/2015/03/01/how-to-send-request-to-ajax-view-in-django-tests/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/03/01/how-to-send-request-to-ajax-view-in-django-tests/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you have a view that requires an AJAX request, in other words, checks if <code>request.is_ajax()</code>, here is a way you can write a unit test for this view:</p>

<div><script src='https://gist.github.com/dca59e325c9f7554d176.js'></script>
<noscript><pre><code>import json
from django.test import TestCase

class JSONViewTestCase(TestCase):

    def test_json_view(self):
        response = self.client.post(
            reverse(&#39;my_json_view&#39;),
            json.dumps({
                # your JSON
            }),
            &#39;json&#39;,
            HTTP_X_REQUESTED_WITH=&#39;XMLHttpRequest&#39;,
        )
        json_string = response.content
        response_data = json.loads(json_string)
        # do smth.</code></pre></noscript></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/01/como-concatenar-querysets-del-mismo-modelo-en-django/">¿Cómo concatenar querysets del mismo modelo en Django?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-01T19:21:21-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>7:21 pm</span></time>
        
           | <a href="/blog/2015/03/01/como-concatenar-querysets-del-mismo-modelo-en-django/#disqus_thread"
             data-disqus-identifier="http://blog.vero4ka.info/blog/2015/03/01/como-concatenar-querysets-del-mismo-modelo-en-django/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Modo #1:</p>

<p>Podemos usar <code>itertools.chain</code> para  unir dos o más querysets:</p>

<pre><code>from itertools import chain
for item in chain(qs1, qs2, qs3):
    # ...
</code></pre>

<p>Modo #2:</p>

<p>Podemos usar el operador lógico <code>OR</code>:</p>

<pre><code>res = qs1 | qs2 | qs3
res = res.distinct()
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/12/18/libros-que-leen-los-ninos-rusos/">Libros que leen los niños rusos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/27/how-to-upload-a-file-to-amazon-s3-and-generate-a-pre-signed-url/">How to upload a file to Amazon S3 and generate a pre-signed URL</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/26/how-to-send-an-email-with-attachment-via-amazon-ses-in-python/">How to send an email with attachment via Amazon SES in Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/21/como-pasar-variable-desde-una-vista-a-formulario-en-django/">Cómo pasar variable desde una vista a formulario en Django</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/10/07/mierdero-de-las-semanas/">Mierdero de las semanas</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/08/herramienta-para-el-desarrollo-que-nos-hacen-la-vida-mas-facil/">Herramientas para el desarrollo que nos hacen la vida más fácil</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/31/multiples-bases-de-datos-en-django/">Múltiples bases de datos en Django</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/18/como-hacer-integracion-con-tpaga-api-usando-python/">Cómo hacer integración con Tpaga API usando Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/07/22/monitoreo-de-acciones-de-usuarios-en-flask-sqlalchemy/">Monitoreo de acciones de usuarios en Flask (SQLAlchemy)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/07/22/flask-for-django-developers/">Flask for Django developers</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Featured Posts</h1>
  <ul id="recent_posts">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
        <li class="post">
          <a href="/blog/2016/08/18/como-hacer-integracion-con-tpaga-api-usando-python/">Cómo hacer integración con Tpaga API usando Python</a>
        </li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/vero4karu">@vero4karu</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'vero4karu',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<a href="https://twitter.com/vero4ka_ru" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @vero4ka_ru</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script><script src="//blockr.io/js_external/coinwidget/coin.js"></script>
        <script>
            CoinWidgetCom.go({
                wallet_address: '12Ep9CdebjLQpnQnim1k6cYT3Z8UPkEQxR',
                currency: 'bitcoin',
                counter: 'count',
                lbl_button: 'Donate',
                lbl_count: 'donations',
                lbl_amount: 'BTC',
                lbl_address: 'Use address below to donate. Thanks!',
                qrcode: true,
                alignment: 'bl',
                decimals: 8,
                size: "small",
                color: "dark",
                countdownFrom: "0",
                element: "#coinwidget-bitcoin-12Ep9CdebjLQpnQnim1k6cYT3Z8UPkEQxR",
                onShow: function(){},
                onHide: function(){}
            });
        </script>
        <div id="coinwidget-bitcoin-12Ep9CdebjLQpnQnim1k6cYT3Z8UPkEQxR"></div><section>
<!-- Show static HTML/CSS as a placeholder in case js is not enabled - javascript include will override this if things work -->
<h1>Goodreads</h1>
<style type="text/css" media="screen">
  .gr_custom_container_1425777029 {
    /* customize your Goodreads widget container here*/
    border: 1px solid gray;
    border-radius:10px;
    padding: 10px 5px 10px 5px;
    background-color: #FFFFFF;
    color: #000000
  }
  .gr_custom_header_1425777029 {
    /* customize your Goodreads header here*/
    border-bottom: 1px solid gray;
    width: 100%;
    margin-bottom: 5px;
    text-align: center;
    font-size: 120%
  }
  .gr_custom_each_container_1425777029 {
    /* customize each individual book container here */
    width: 100%;
    clear: both;
    margin-bottom: 10px;
    overflow: auto;
    padding-bottom: 4px;
    border-bottom: 1px solid #aaa;
  }
  .gr_custom_book_container_1425777029 {
    /* customize your book covers here */
    overflow: hidden;
    height: 60px;
      float: left;
      margin-right: 4px;
      width: 39px;
  }
  .gr_custom_author_1425777029 {
    /* customize your author names here */
    font-size: 10px;
  }
  .gr_custom_tags_1425777029 {
    /* customize your tags here */
    font-size: 10px;
    color: gray;
  }
  .gr_custom_rating_1425777029 {
    /* customize your rating stars here */
    float: right;
  }
</style>

      <div id="gr_custom_widget_1425777029">
          <div class="gr_custom_container_1425777029">
    <h2 class="gr_custom_header_1425777029">
    <a href="https://www.goodreads.com/review/list/3165514-vera?shelf=read&amp;utm_medium=api&amp;utm_source=custom_widget" style="text-decoration: none;">Vera's bookshelf: read</a>
    </h2>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1194506057?utm_medium=api&amp;utm_source=custom_widget" title="On the Road"><img alt="On the Road" border="0" src="https://d.gr-assets.com/books/1413588576s/70401.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="2 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_2_of_5.png" title="2 of 5 stars, it was ok" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1194506057?utm_medium=api&amp;utm_source=custom_widget">On the Road</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/1742.Jack_Kerouac">Jack Kerouac</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1135255906?utm_medium=api&amp;utm_source=custom_widget" title="The Call of the Wild"><img alt="The Call of the Wild" border="0" src="https://d.gr-assets.com/books/1412619130s/1852.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="4 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_4_of_5.png" title="4 of 5 stars, really liked it" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1135255906?utm_medium=api&amp;utm_source=custom_widget">The Call of the Wild</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/1240.Jack_London">Jack London</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1131823011?utm_medium=api&amp;utm_source=custom_widget" title="Murder on the Leviathan (Erast Fandorin Mysteries, #3)"><img alt="Murder on the Leviathan" border="0" src="https://d.gr-assets.com/books/1410658503s/64552.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="5 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_5_of_5.png" title="5 of 5 stars, it was amazing" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1131823011?utm_medium=api&amp;utm_source=custom_widget">Murder on the Leviathan</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/34589.Boris_Akunin">Boris Akunin</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1119579656?utm_medium=api&amp;utm_source=custom_widget" title="Roadside Picnic"><img alt="Roadside Picnic" border="0" src="https://d.gr-assets.com/books/1173812259s/331256.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="4 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_4_of_5.png" title="4 of 5 stars, really liked it" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1119579656?utm_medium=api&amp;utm_source=custom_widget">Roadside Picnic</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/1159886.Arkady_Strugatsky">Arkady Strugatsky</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1112654338?utm_medium=api&amp;utm_source=custom_widget" title="The Turkish Gambit (Erast Fandorin Mysteries, #2)"><img alt="The Turkish Gambit" border="0" src="https://d.gr-assets.com/books/1389073713s/97428.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="4 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_4_of_5.png" title="4 of 5 stars, really liked it" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1112654338?utm_medium=api&amp;utm_source=custom_widget">The Turkish Gambit</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/34589.Boris_Akunin">Boris Akunin</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1089110161?utm_medium=api&amp;utm_source=custom_widget" title="The Diary of a Young Girl"><img alt="The Diary of a Young Girl" border="0" src="https://d.gr-assets.com/books/1358276407s/48855.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="5 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_5_of_5.png" title="5 of 5 stars, it was amazing" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1089110161?utm_medium=api&amp;utm_source=custom_widget">The Diary of a Young Girl</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/3720.Anne_Frank">Anne Frank</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
      <div class="gr_custom_each_container_1425777029">
          <div class="gr_custom_book_container_1425777029">
            <a href="https://www.goodreads.com/review/show/1088529875?utm_medium=api&amp;utm_source=custom_widget" title="Fathers and Sons"><img alt="Fathers and Sons" border="0" src="https://d.gr-assets.com/books/1390793535s/19117.jpg" /></a>
          </div>
          <div class="gr_custom_rating_1425777029">
            <img alt="5 of 5 stars" class=" staticStars" src="https://www.goodreads.com/images/layout/stars/red_star_5_of_5.png" title="5 of 5 stars, it was amazing" />
          </div>
          <div class="gr_custom_title_1425777029">
            <a href="https://www.goodreads.com/review/show/1088529875?utm_medium=api&amp;utm_source=custom_widget">Fathers and Sons</a>
          </div>
          <div class="gr_custom_author_1425777029">
            by <a href="https://www.goodreads.com/author/show/410680.Ivan_Turgenev">Ivan Turgenev</a>
          </div>
          <div class="gr_custom_review_1425777029">
            
          </div>
      </div>
  <br style="clear: both"/>
  <center>
    <a href="https://www.goodreads.com/"><img alt="goodreads.com" src="https://www.goodreads.com/images/widget/widget_logo.gif" style="border:0" /></a>
  </center>
  <noscript>
    Share <a href="https://www.goodreads.com/">book reviews</a> and ratings with Vera, and even join a <a href="https://www.goodreads.com/group">book club</a> on Goodreads.
  </noscript>
  </div>
      </div>
</section>
<script src="https://www.goodreads.com/review/custom_widget/3165514.Vera's%20bookshelf:%20read?cover_position=left&cover_size=small&num_books=7&order=d&shelf=read&show_author=1&show_cover=1&show_rating=1&show_review=1&show_tags=1&show_title=1&sort=date_added&widget_bg_color=FFFFFF&widget_bg_transparent=&widget_border_width=1&widget_id=1425777029&widget_text_color=000000&widget_title_size=medium&widget_width=medium" type="text/javascript" charset="utf-8"></script>
<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+VeraMazhuga?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - vero4ka -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - 
  <i>Image: <a href="https://unsplash.com/?photo=O85h02qZ24w">unsplash.com</a></i>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'vero4ka';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
